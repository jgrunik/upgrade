import{c as _,a as l,o as O,b as F,u as G,d as J,e as C,f as q,h,j as f,g as a,t as c,s as $,r as p,k as Y,l as K,m as v,n as V,p as z,q as k,v as A,S as Q,i as W}from"../chunks/chunk-MWWaRpkj.js";import{_ as X}from"../chunks/chunk-9zjs2ake.js";function Z(t){const{components:e=[],children:o}=t;return _(()=>e.reduceRight((r,s)=>l(s,{children:r}),o))}function S(t,e={}){const o=J(t);function r(n){var u;return(u=e.onInit)==null||u.call(e),O(()=>{var i;return(i=e.onMount)==null?void 0:i.call(e)}),F(()=>{var i;return(i=e.onCleanUp)==null?void 0:i.call(e)}),l(o.Provider,{value:t,get children(){return n.children}})}function s(){const n=G(o);if(n===void 0)throw new Error("use() must be used within a Context.Provider");return n}return{Provider:r,use:s}}const[ee,te]=C(),{Provider:oe,use:We}=S({game:ee,setGame:te},{onInit(){},onMount(){},onCleanUp(){}}),[re,ne]=q(),{Provider:se,use:B}=S(re,{onInit(){},async onMount(){const t=(await X(()=>import("../chunks/chunk-0Ct39pI4.js"),__vite__mapDeps([]))).default;ne(()=>t)},onCleanUp(){}});function T(...t){t==null||t.forEach(([e,o])=>ae(e,o))}function ae(t,e){h(f(e,()=>localStorage.setItem(t,e()),{defer:!0}))}const[g,M]=C(),U=B(),{Provider:ce,use:x}=S({localPlayer:g,setLocalPlayer:M},{onInit(){T(["playerId",()=>g.id],["nickname",()=>g.nickname],["avatarSeed",()=>g.avatarSeed]),h(f([()=>g.id,U],()=>{g.id!==void 0&&U()!==void 0&&M("peer",new(U())(g.id))},{defer:!0}))},onMount(){M({id:localStorage.getItem("playerId")??window.crypto.randomUUID(),nickname:localStorage.getItem("nickname")??"",avatarSeed:localStorage.getItem("avatarSeed")??window.crypto.randomUUID()})},onCleanUp(){}});function ie(){const{room:t,setRoom:e}=D();if(!t.isHost){H();return}t.peer.on("open",o=>{H()}),t.peer.on("connection",o=>{const r=o.peer;o.on("open",()=>{const s={id:r,connection:o};e("players",n=>[...n,s])}).on("close",()=>{}).on("error",s=>{console.warn(`[Room] error with player: ${r}`),console.warn({error:s})}).on("data",s=>{const{type:n,payload:u}=s;if(n===void 0){console.warn(`[Room] malformed data from player: ${r}`);return}if(n=="Player::Initialise"){const{nickname:i,avatarSeed:N}=u;e("players",j=>j.map(I=>I.id!==r?I:{...I,nickname:i,avatarSeed:N}))}})})}function H(){const{localPlayer:t}=x(),{room:e,setRoom:o}=D(),r=t.peer.connect(e.id),s=r.peer;o("connection",r),r.on("open",()=>{const n={type:"Player::Initialise",payload:{nickname:t.nickname,avatarSeed:t.avatarSeed}};r.send(n)}).on("close",()=>{}).on("error",n=>{console.warn(`[Player] error with room: ${s}`),console.warn({error:n})}).on("data",n=>{})}const R=B(),[d,L]=C({players:[]}),{Provider:le,use:D}=S({room:d,setRoom:L},{onInit(){h(f(()=>d.players,()=>{console.log("Players changed"),console.table(d.players)},{defer:!0})),h(f(()=>d.localPlayer,()=>{d.isHost&&history.pushState(null,"",`?room=${d.id}`)},{defer:!0})),h(f([()=>d.isHost,R],()=>{d.isHost&&R()!==void 0&&L("peer",new(R())(d.id))},{defer:!0})),h(f(()=>d.localPlayer,ie,{defer:!0}))},onMount(){const e=new URLSearchParams(document.location.search).get("room");L({isHost:e===null,id:e??window.crypto.randomUUID()})},onCleanUp(){}}),de=["light","dark"],me=de,E=["system",...me],[m,y]=C({colorScheme:{isDark:!1,setting:"system"}}),{Provider:ue,use:he}=S({UI:m,setUI:y},{onInit(){T(["colorSchemeSetting",()=>m.colorScheme.setting]),h(f(()=>m.colorScheme.isDark,()=>{m.colorScheme.isDark?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")},{defer:!1})),h(()=>{y("colorScheme","isDark",m.colorScheme.setting!=="system"?m.colorScheme.setting==="dark":pe()??m.colorScheme.isDark)})},onMount(){const t=localStorage.getItem("colorSchemeSetting")??m.colorScheme.setting;y("colorScheme","setting",t),window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",({matches:e})=>{m.colorScheme.setting==="system"&&y("colorScheme",{isDark:e})})},onCleanUp(){}});function pe(){if(window.matchMedia!==void 0)return window.matchMedia("(prefers-color-scheme: dark)").matches}function ge(){const e=(E.indexOf(m.colorScheme.setting)+1)%E.length;y("colorScheme","setting",E[e])}const fe=c('<footer><p xmlns:cc=http://creativecommons.org/ns# xmlns:dct=http://purl.org/dc/terms/><a rel=cc:attributionURL property=dct:title href=https://github.com/jgrunik/upgrade>Upgrade</a>&nbsp;by&nbsp;<a rel="cc:attributionURL dct:creator"property=cc:attributionName href=https://github.com/jgrunik>Joshua Grunik</a>&nbsp;is licensed under&nbsp;<a rel="license noopener noreferrer"href=http://creativecommons.org/licenses/by-nc-sa/4.0/ target=_blank>CC BY-NC-SA 4.0</a><br><span style=display:inline-flex;height:2ch><img src=https://mirrors.creativecommons.org/presskit/icons/cc.svg><img src=https://mirrors.creativecommons.org/presskit/icons/by.svg><img src=https://mirrors.creativecommons.org/presskit/icons/nc.svg><img src=https://mirrors.creativecommons.org/presskit/icons/sa.svg>'),ve=()=>a(fe),$e=c('<svg xmlns=http://www.w3.org/2000/svg width=1em height=1em fill=none stroke=currentColor stroke-width=0 style=overflow:visible;color:currentcolor viewBox="0 0 24 24"><path fill=currentColor fill-rule=evenodd stroke=none d="M2.25 5.25a3 3 0 0 1 3-3h13.5a3 3 0 0 1 3 3V15a3 3 0 0 1-3 3h-3v.257c0 .597.237 1.17.659 1.591l.621.622a.75.75 0 0 1-.53 1.28h-9a.75.75 0 0 1-.53-1.28l.621-.622a2.25 2.25 0 0 0 .659-1.59V18h-3a3 3 0 0 1-3-3zm1.5 0v7.5a1.5 1.5 0 0 0 1.5 1.5h13.5a1.5 1.5 0 0 0 1.5-1.5v-7.5a1.5 1.5 0 0 0-1.5-1.5H5.25a1.5 1.5 0 0 0-1.5 1.5"clip-rule=evenodd>'),we=(t={})=>(()=>{const e=a($e);return $(e,t,!0,!0),p(),e})(),ye=c('<svg xmlns=http://www.w3.org/2000/svg width=1em height=1em fill=currentColor stroke-width=0 style=overflow:visible;color:currentcolor viewBox="0 0 16 16"><path d="M6 .278a.768.768 0 0 1 .08.858 7.208 7.208 0 0 0-.878 3.46c0 4.021 3.278 7.277 7.318 7.277.527 0 1.04-.055 1.533-.16a.787.787 0 0 1 .81.316.733.733 0 0 1-.031.893A8.349 8.349 0 0 1 8.344 16C3.734 16 0 12.286 0 7.71 0 4.266 2.114 1.312 5.124.06A.752.752 0 0 1 6 .278"></path><path d="M10.794 3.148a.217.217 0 0 1 .412 0l.387 1.162c.173.518.579.924 1.097 1.097l1.162.387a.217.217 0 0 1 0 .412l-1.162.387a1.734 1.734 0 0 0-1.097 1.097l-.387 1.162a.217.217 0 0 1-.412 0l-.387-1.162A1.734 1.734 0 0 0 9.31 6.593l-1.162-.387a.217.217 0 0 1 0-.412l1.162-.387a1.734 1.734 0 0 0 1.097-1.097zM13.863.099a.145.145 0 0 1 .274 0l.258.774c.115.346.386.617.732.732l.774.258a.145.145 0 0 1 0 .274l-.774.258a1.156 1.156 0 0 0-.732.732l-.258.774a.145.145 0 0 1-.274 0l-.258-.774a1.156 1.156 0 0 0-.732-.732l-.774-.258a.145.145 0 0 1 0-.274l.774-.258c.346-.115.617-.386.732-.732z">'),_e=(t={})=>(()=>{const e=a(ye);return $(e,t,!0,!0),p(),e})(),Se=c('<svg xmlns=http://www.w3.org/2000/svg width=1em height=1em fill=currentColor stroke-width=0 style=overflow:visible;color:currentcolor viewBox="0 0 16 16"><path d="M8 12a4 4 0 1 0 0-8 4 4 0 0 0 0 8M8 0a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-1 0v-2A.5.5 0 0 1 8 0m0 13a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-1 0v-2A.5.5 0 0 1 8 13m8-5a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1 0-1h2a.5.5 0 0 1 .5.5M3 8a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1 0-1h2A.5.5 0 0 1 3 8m10.657-5.657a.5.5 0 0 1 0 .707l-1.414 1.415a.5.5 0 1 1-.707-.708l1.414-1.414a.5.5 0 0 1 .707 0m-9.193 9.193a.5.5 0 0 1 0 .707L3.05 13.657a.5.5 0 0 1-.707-.707l1.414-1.414a.5.5 0 0 1 .707 0m9.193 2.121a.5.5 0 0 1-.707 0l-1.414-1.414a.5.5 0 0 1 .707-.707l1.414 1.414a.5.5 0 0 1 0 .707M4.464 4.465a.5.5 0 0 1-.707 0L2.343 3.05a.5.5 0 1 1 .707-.707l1.414 1.414a.5.5 0 0 1 0 .708">'),xe=(t={})=>(()=>{const e=a(Se);return $(e,t,!0,!0),p(),e})(),Pe=c('<button class="card border"style=margin-right:0;margin:0;padding:0.5rem>'),be={system:we,dark:_e,light:xe};function ke(){const{UI:t}=he(),e=_(()=>be[t.colorScheme.setting]);return(()=>{const o=a(Pe);return K(o,"click",ge,!0),v(o,e),V(()=>z(o,"popover-left",`color scheme '${t.colorScheme.setting}'`)),p(),o})()}Y(["click"]);const Ce=c('<svg xmlns=http://www.w3.org/2000/svg width=1em height=1em fill=currentColor stroke-width=0 style=overflow:visible;color:currentcolor viewBox="0 0 16 16"><path d="M12.775 5.44C9.751 3.192 8.708 1.393 8.001 0c-.708 1.393-1.75 3.192-4.774 5.44-5.157 3.833-.303 9.182 3.965 6.238-.278 1.827-1.227 3.159-2.191 3.733v.59h6v-.59c-.964-.574-1.913-1.906-2.191-3.733 4.268 2.944 9.122-2.405 3.965-6.238">'),Ie=(t={})=>(()=>{const e=a(Ce);return $(e,t,!0,!0),p(),e})(),Me=c("<header class=not-selectable><h1><!$><!/> Upgrade</h1><!$><!/>"),Ue=()=>(()=>{const t=a(Me),e=t.firstChild,o=e.firstChild,[r,s]=k(o.nextSibling);r.nextSibling;const n=e.nextSibling,[u,i]=k(n.nextSibling);return v(e,Ie,r,s),v(t,l(ke,{}),u,i),t})(),Re=c("<img alt=avatar draggable=false>"),Le=c("<button>"),{localPlayer:P,setLocalPlayer:Ee}=x();function Ae(t){const e=_(()=>{if(P!=null&&P.avatarSeed)return`https://api.dicebear.com/7.x/lorelei/svg?seed=${P.avatarSeed}`});return(()=>{const o=a(Le);return $(o,A(t,{id:"avatar_selector_button",class:"container border-3 border-dashed shadow shadow-small",style:{"font-size":"x-large","max-width":"28ch","aspect-ratio":1,height:"auto"},onClick:De}),!1,!0),v(o,l(Q,{get when(){return e()},get children(){const r=a(Re);return r.style.setProperty("margin","0"),r.style.setProperty("border","0"),V(()=>z(r,"src",e())),r}})),p(),o})()}function De(){Ee("avatarSeed",window.crypto.randomUUID())}const He=c("<button>"),{room:b,setRoom:Ve}=D(),{localPlayer:ze,setLocalPlayer:Be}=x();function Te(t){const e=_(()=>`⚔ ${b!=null&&b.isHost?"Host":"Join"} Room`);return(()=>{const o=a(He);return $(o,A(t,{id:"enter_room_button",class:"btn-secondary-outline",style:"max-width: fit-content; font-size: xx-large; font-variant: small-caps",get innerText(){return e()},onClick:()=>{Be({room:b}),Ve({localPlayer:ze})}}),!1,!1),p(),o})()}const Ne=c("<input>");function je(t){const{localPlayer:e,setLocalPlayer:o}=x();return(()=>{const r=a(Ne);return $(r,A(t,{id:"nickname_name_input",type:"text",placeholder:"nickname goes here ♥",class:"container border-3 border-dashed shadow shadow-hover shadow-small",maxlength:"24",style:{"text-align":"center","font-size":"x-large","max-width":"28ch"},get value(){return e==null?void 0:e.nickname},onInput:s=>o("nickname",s.target.value)}),!1,!1),p(),r})()}const Oe=c("<section><!$><!/><!$><!/>"),{localPlayer:w}=x();function Fe(){const t=_(()=>(w==null?void 0:w.room)!==void 0);return[(()=>{const e=a(Oe),o=e.firstChild,[r,s]=k(o.nextSibling),n=r.nextSibling,[u,i]=k(n.nextSibling);return v(e,l(Ae,{get disabled(){return t()}}),r,s),v(e,l(je,{get disabled(){return t()}}),u,i),e})(),l(Te,{get disabled(){return!(w!=null&&w.nickname)||t()}})]}const Ge=c("<main>"),Je=[ue,oe,le,ce,se];function qe(){return l(Z,{components:Je,get children(){return[l(Ue,{}),(()=>{const t=a(Ge);return v(t,l(Fe,{})),t})(),l(ve,{})]}})}const Ye=Object.freeze(Object.defineProperty({__proto__:null,default:qe},Symbol.toStringTag,{value:"Module"})),Xe=[{configName:"onRenderClient",importPath:"/renderer/+onRenderClient.tsx",isValueFile:!0,exportValues:W},{configName:"Page",importPath:"/pages/index/+Page.tsx",isValueFile:!0,exportValues:Ye}],Ze={onBeforeRenderEnv:{definedAt:{isComputed:!0},valueSerialized:"null"}};export{Xe as configValuesImported,Ze as configValuesSerialized};
function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = []
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}