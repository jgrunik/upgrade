import{c as x,a as m,o as B,b as F,u as O,d as G,e as P,f as M,h as p,j as g,g as c,t as i,s as $,r as h,k as V,l as J,m as v,n as U,p as z,q as w,v as T,S as q,w as A,i as Y}from"../chunks/chunk-PeyjAfUL.js";import{_ as K}from"../chunks/chunk-9zjs2ake.js";function Q(t){const{components:e=[],children:o}=t;return x(()=>e.reduceRight((r,n)=>m(n,{children:r}),o))}function S(t,e={}){const o=G(t);function r(a){var l;return(l=e.onInit)==null||l.call(e),B(()=>{var s;return(s=e.onMount)==null?void 0:s.call(e)}),F(()=>{var s;return(s=e.onCleanUp)==null?void 0:s.call(e)}),m(o.Provider,{value:t,get children(){return a.children}})}function n(){const a=O(o);if(a===void 0)throw new Error("use() must be used within a Context.Provider");return a}return{Provider:r,use:n}}const[W,X]=P(),{Provider:Z,use:Oe}=S({game:W,setGame:X},{onInit(){},onMount(){},onCleanUp(){}}),[ee,te]=M(),{Provider:oe,use:N}=S(ee,{onInit(){},async onMount(){const t=(await K(()=>import("../chunks/chunk-0Ct39pI4.js"),__vite__mapDeps([]))).default;te(()=>t)},onCleanUp(){}});function re(){const{room:t}=I();if(!t.isHost){D();return}t.peer.on("open",e=>{console.log("[Room] room opened:",`${e}`),D()}),t.peer.on("connection",e=>{const o=e.peer;e.on("open",()=>{console.log(`[Room] player connected: ${o}`)}).on("close",()=>{console.log(`[Room] player disconnected: ${o}`)}).on("error",r=>{console.log(`[Room] error with player: ${o}`),console.error({error:r})}).on("data",r=>{console.log(`[Room] data from player: ${o}`),console.log(r)})})}function D(){const{player:t}=j(),{room:e,setRoom:o}=I(),r=t.peer.connect(e.id);console.log(`[Player] room connecting: ${e.id}`);const n=r.peer;o("connection",r),r.on("open",()=>{console.log(`[Player] room connected: ${n}`),r.send({event:"FIRST_MESSAGE",data:{nickname:t.nickname,avatarSeed:t.avatarSeed}})}).on("close",()=>{console.log(`[Player] room disconnected: ${n}`)}).on("error",a=>{console.log(`[Player] error with room: ${n}`),console.error({error:a})}).on("data",a=>{console.log(`[Player] data from room: ${n}`),console.table(a)})}const b=N(),[f,k]=P(),{Provider:ne,use:I}=S({room:f,setRoom:k},{onInit(){p(g([()=>f.isHost,b],()=>{f.isHost&&b()!==void 0&&k("peer",new(b())(f.id))},{defer:!0})),p(g(()=>f.id,()=>localStorage.setItem("roomId",f.id),{defer:!0}))},onMount(){const e=new URLSearchParams(document.location.search).get("room");k({isHost:e===null,id:e??window.crypto.randomUUID()})},onCleanUp(){}}),[d,C]=P(),R=N();I();const{Provider:se,use:j}=S({player:d,setPlayer:C},{onInit(){p(g([()=>d.id,()=>d.nickname,()=>d.avatarSeed],()=>{localStorage.setItem("playerId",d.id),localStorage.setItem("nickname",d.nickname),localStorage.setItem("avatarSeed",d.avatarSeed)},{defer:!0})),p(g([()=>d.id,R,()=>d.id],()=>{const t=d.id===void 0||R()===void 0?void 0:new(R())(d.id);C({peer:t})},{defer:!0}))},onMount(){C({id:localStorage.getItem("playerId")??window.crypto.randomUUID(),nickname:localStorage.getItem("nickname")??"",avatarSeed:localStorage.getItem("avatarSeed")??window.crypto.randomUUID()})},onCleanUp(){}}),ae=["light","dark"],ce=ae,E=["system",...ce],[u,_]=P({colorScheme:{isDark:!1,setting:"system"}}),{Provider:ie,use:le}=S({UI:u,setUI:_},{onInit(){p(g(()=>u.colorScheme.isDark,()=>{u.colorScheme.isDark?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")},{defer:!1})),p(g(()=>u.colorScheme.setting,()=>{_("colorScheme","isDark",u.colorScheme.setting!=="system"?u.colorScheme.setting==="dark":de()??u.colorScheme.isDark)},{defer:!1}))},onMount(){const t=localStorage.getItem("colorScheme")??u.colorScheme.setting;_("colorScheme","setting",t),window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",()=>{u.colorScheme.setting==="system"&&_("colorScheme","setting","system")})},onCleanUp(){}});function de(){if(window.matchMedia!==void 0)return window.matchMedia("(prefers-color-scheme: dark)").matches}function me(){const e=(E.indexOf(u.colorScheme.setting)+1)%E.length;_("colorScheme","setting",E[e])}const ue=i('<footer><p xmlns:cc=http://creativecommons.org/ns# xmlns:dct=http://purl.org/dc/terms/><a rel=cc:attributionURL property=dct:title href=https://github.com/jgrunik/upgrade>Upgrade</a>&nbsp;by&nbsp;<a rel="cc:attributionURL dct:creator"property=cc:attributionName href=https://github.com/jgrunik>Joshua Grunik</a>&nbsp;is licensed under&nbsp;<a rel="license noopener noreferrer"href=http://creativecommons.org/licenses/by-nc-sa/4.0/ target=_blank>CC BY-NC-SA 4.0</a><br><span style=display:inline-flex;height:2ch><img src=https://mirrors.creativecommons.org/presskit/icons/cc.svg><img src=https://mirrors.creativecommons.org/presskit/icons/by.svg><img src=https://mirrors.creativecommons.org/presskit/icons/nc.svg><img src=https://mirrors.creativecommons.org/presskit/icons/sa.svg>'),ge=()=>c(ue),he=i('<svg xmlns=http://www.w3.org/2000/svg width=1em height=1em fill=none stroke=currentColor stroke-width=0 style=overflow:visible;color:currentcolor viewBox="0 0 24 24"><path fill=currentColor fill-rule=evenodd stroke=none d="M2.25 5.25a3 3 0 0 1 3-3h13.5a3 3 0 0 1 3 3V15a3 3 0 0 1-3 3h-3v.257c0 .597.237 1.17.659 1.591l.621.622a.75.75 0 0 1-.53 1.28h-9a.75.75 0 0 1-.53-1.28l.621-.622a2.25 2.25 0 0 0 .659-1.59V18h-3a3 3 0 0 1-3-3zm1.5 0v7.5a1.5 1.5 0 0 0 1.5 1.5h13.5a1.5 1.5 0 0 0 1.5-1.5v-7.5a1.5 1.5 0 0 0-1.5-1.5H5.25a1.5 1.5 0 0 0-1.5 1.5"clip-rule=evenodd>'),pe=(t={})=>(()=>{const e=c(he);return $(e,t,!0,!0),h(),e})(),ve=i('<svg xmlns=http://www.w3.org/2000/svg width=1em height=1em fill=currentColor stroke-width=0 style=overflow:visible;color:currentcolor viewBox="0 0 16 16"><path d="M6 .278a.768.768 0 0 1 .08.858 7.208 7.208 0 0 0-.878 3.46c0 4.021 3.278 7.277 7.318 7.277.527 0 1.04-.055 1.533-.16a.787.787 0 0 1 .81.316.733.733 0 0 1-.031.893A8.349 8.349 0 0 1 8.344 16C3.734 16 0 12.286 0 7.71 0 4.266 2.114 1.312 5.124.06A.752.752 0 0 1 6 .278"></path><path d="M10.794 3.148a.217.217 0 0 1 .412 0l.387 1.162c.173.518.579.924 1.097 1.097l1.162.387a.217.217 0 0 1 0 .412l-1.162.387a1.734 1.734 0 0 0-1.097 1.097l-.387 1.162a.217.217 0 0 1-.412 0l-.387-1.162A1.734 1.734 0 0 0 9.31 6.593l-1.162-.387a.217.217 0 0 1 0-.412l1.162-.387a1.734 1.734 0 0 0 1.097-1.097zM13.863.099a.145.145 0 0 1 .274 0l.258.774c.115.346.386.617.732.732l.774.258a.145.145 0 0 1 0 .274l-.774.258a1.156 1.156 0 0 0-.732.732l-.258.774a.145.145 0 0 1-.274 0l-.258-.774a1.156 1.156 0 0 0-.732-.732l-.774-.258a.145.145 0 0 1 0-.274l.774-.258c.346-.115.617-.386.732-.732z">'),fe=(t={})=>(()=>{const e=c(ve);return $(e,t,!0,!0),h(),e})(),$e=i('<svg xmlns=http://www.w3.org/2000/svg width=1em height=1em fill=currentColor stroke-width=0 style=overflow:visible;color:currentcolor viewBox="0 0 16 16"><path d="M8 12a4 4 0 1 0 0-8 4 4 0 0 0 0 8M8 0a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-1 0v-2A.5.5 0 0 1 8 0m0 13a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-1 0v-2A.5.5 0 0 1 8 13m8-5a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1 0-1h2a.5.5 0 0 1 .5.5M3 8a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1 0-1h2A.5.5 0 0 1 3 8m10.657-5.657a.5.5 0 0 1 0 .707l-1.414 1.415a.5.5 0 1 1-.707-.708l1.414-1.414a.5.5 0 0 1 .707 0m-9.193 9.193a.5.5 0 0 1 0 .707L3.05 13.657a.5.5 0 0 1-.707-.707l1.414-1.414a.5.5 0 0 1 .707 0m9.193 2.121a.5.5 0 0 1-.707 0l-1.414-1.414a.5.5 0 0 1 .707-.707l1.414 1.414a.5.5 0 0 1 0 .707M4.464 4.465a.5.5 0 0 1-.707 0L2.343 3.05a.5.5 0 1 1 .707-.707l1.414 1.414a.5.5 0 0 1 0 .708">'),_e=(t={})=>(()=>{const e=c($e);return $(e,t,!0,!0),h(),e})(),Se=i('<button class="card border"style=margin-right:0;margin:0;padding:0.5rem>'),ye={system:pe,dark:fe,light:_e};function we(){const{UI:t}=le(),e=x(()=>ye[t.colorScheme.setting]);return(()=>{const o=c(Se);return J(o,"click",me,!0),v(o,e),U(()=>z(o,"popover-left",`color scheme '${t.colorScheme.setting}'`)),h(),o})()}V(["click"]);const xe=i('<svg xmlns=http://www.w3.org/2000/svg width=1em height=1em fill=currentColor stroke-width=0 style=overflow:visible;color:currentcolor viewBox="0 0 16 16"><path d="M12.775 5.44C9.751 3.192 8.708 1.393 8.001 0c-.708 1.393-1.75 3.192-4.774 5.44-5.157 3.833-.303 9.182 3.965 6.238-.278 1.827-1.227 3.159-2.191 3.733v.59h6v-.59c-.964-.574-1.913-1.906-2.191-3.733 4.268 2.944 9.122-2.405 3.965-6.238">'),Pe=(t={})=>(()=>{const e=c(xe);return $(e,t,!0,!0),h(),e})(),Ie=i("<header class=not-selectable><h1><!$><!/> Upgrade</h1><!$><!/>"),be=()=>(()=>{const t=c(Ie),e=t.firstChild,o=e.firstChild,[r,n]=w(o.nextSibling);r.nextSibling;const a=e.nextSibling,[l,s]=w(a.nextSibling);return v(e,Pe,r,n),v(t,m(we,{}),l,s),t})(),ke=i("<img alt=avatar draggable=false>"),Ce=i("<button>"),{player:H,setPlayer:Re}=j();function Ee(t){const e=x(g(()=>H.avatarSeed,()=>`https://api.dicebear.com/7.x/lorelei/svg?seed=${H.avatarSeed}`,{defer:!0}));return(()=>{const o=c(Ce);return $(o,T(t,{id:"avatar_selector_button",class:"container border-3 border-dashed shadow shadow-small",style:{"font-size":"x-large","max-width":"28ch","aspect-ratio":1,height:"auto"},onClick:Me}),!1,!0),v(o,m(q,{get when(){return e()},get children(){const r=c(ke);return r.style.setProperty("margin","0"),r.style.setProperty("border","0"),U(()=>z(r,"src",e())),r}})),h(),o})()}function Me(){Re("avatarSeed",window.crypto.randomUUID())}const Ue=i("<button id=enter_room_button class=btn-secondary-outline style=max-width:fit-content;font-size:xx-large;font-variant:small-caps>");function Le(){const[t,e]=M(!1),{room:o}=I(),r=x(()=>`⚔ ${o!=null&&o.isHost?"Host":"Join"} Room`);function n(a){return(()=>{const l=c(Ue);return l.$$click=()=>{t()||(o.isHost&&history.pushState(null,"",`?room=${o.id}`),e(!0))},U(s=>{const y=t(),L=r();return y!==s._v$&&A(l,"disabled",s._v$=y),L!==s._v$2&&A(l,"innerText",s._v$2=L),s},{_v$:void 0,_v$2:void 0}),h(),l})()}return{EnterRoomButton:n,isEnteringRoom:t}}V(["click"]);const Ae=i("<input>");function De(t){const[e,o]=M("");return B(()=>{o(localStorage.getItem("nickname")??"")}),(()=>{const r=c(Ae);return $(r,T(t,{id:"nickname_name_input",type:"text",placeholder:"nickname goes here ♥",class:"container border-3 border-dashed shadow shadow-hover shadow-small",maxlength:"24",style:{"text-align":"center","font-size":"x-large","max-width":"28ch"},get value(){return e()},onInput:n=>localStorage.setItem("nickname",n.target.value)}),!1,!1),h(),r})()}const He=i("<section><!$><!/><!$><!/>");function Be(){const{EnterRoomButton:t,isEnteringRoom:e}=Le();return{EntryLayout:()=>[(()=>{const o=c(He),r=o.firstChild,[n,a]=w(r.nextSibling),l=n.nextSibling,[s,y]=w(l.nextSibling);return v(o,m(Ee,{get disabled(){return e()}}),n,a),v(o,m(De,{get disabled(){return e()}}),s,y),o})(),m(t,{})],isEnteringRoom:e}}const Ve=i("<main>"),ze=[Z,ne,oe,se,ie];function Te(){const{EntryLayout:t,isEnteringRoom:e}=Be();return p(g(e,re,{defer:!0})),m(Q,{components:ze,get children(){return[m(be,{}),(()=>{const o=c(Ve);return v(o,m(t,{})),o})(),m(ge,{})]}})}const Ne=Object.freeze(Object.defineProperty({__proto__:null,default:Te},Symbol.toStringTag,{value:"Module"})),Ge=[{configName:"onRenderClient",importPath:"/renderer/+onRenderClient.tsx",isValueFile:!0,exportValues:Y},{configName:"Page",importPath:"/pages/index/+Page.tsx",isValueFile:!0,exportValues:Ne}],Je={onBeforeRenderEnv:{definedAt:{isComputed:!0},valueSerialized:"null"}};export{Ge as configValuesImported,Je as configValuesSerialized};
function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = []
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}