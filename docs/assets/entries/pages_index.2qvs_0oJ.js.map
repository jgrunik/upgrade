{"version":3,"mappings":"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","names":["createContextProvider","value","callbacks","Context","createContext","Provider","props","context","onInit","onMount","onCleanup","onCleanUp","_$createComponent","children","use","useContext","undefined","Error","_Peer","setPeer","createSignal","PeerJSProvider","usePeerJS","Peer","createPeer","__vitePreload","then","PeerJS","default","args","room","setRoom","createStore","players","RoomProvider","useRoom","params_roomId","URLSearchParams","document","location","search","get","id","isHost","createHostRoom","console","log","hostRoom","setHostRoom","useHostRoom","peer","on","error","warn","destroy","roomId","connection","peerId","roomPlayer","filter","data","type","payload","DataEventHandlers","onPlayerInitialise","playerData","player","DataEvent","onRoomUpdate","roomUpdate","createPersistance","pairs","key","_createPersistance","createMemo","localPlayer","setLocalPlayer","LocalPlayerProvider","useLocalPlayer","joinRoom","roomConnection","AvatarSelector","avatarSrc","avatarSeed","_el$","_$getNextElement","_tmpl$2","_$spread","_$mergeProps","height","randomiseAvatar","_$insert","Show","when","_el$2","_tmpl$","style","setProperty","_$effect","_$setAttribute","_$runHydrationEvents","window","crypto","randomUUID","loadingDotsSVG","EnterRoomButton","loading","innerHTML","_$memo","NicknameInput","nickname","event","target","EntryScene","UI","setUI","useUI","isPendingEntry","setIsPendingEntry","name","defer","createEffect","alert","show","enterRoom","firstChild","_el$3","_co$","_$getNextMarker","nextSibling","_el$4","_el$5","_co$2","disabled","onclick","GameLayout","StartGameButton","Tabs","activeTab","For","each","tabs","tab","i","_el$6","_$setProperty","_el$7","_tmpl$3","label","_el$8","_tmpl$4","content","optionsSVG","LobbyLayout","history","pushState","length","Index","colorSchemes_matchMedia","colorSchemes","colorSchemeOptions","scenes","Entry","Lobby","LobbyScene","Game","GameScene","colorScheme","isDark","setting","toggleSetting","toggleColorSchemeSetting","scene","component","level","documentElement","classList","add","remove","isSystemDark","colorSchemeSetting","localStorage","getItem","matchMedia","addEventListener","matches","new_idx","indexOf","AlertModal","dialogRef","showModal","close","_$use","$$click","_$className","_$delegateEvents","Compose","components","reduceRight","ComponentStack","Component","game","setGame","GameProvider","useGame","contexts","UIProvider","Footer","systemIcon","darkIcon","lightIcon","IconList","system","dark","light","ColorSchemeButton","icon","_$addEventListener","spadeSVG","Header","IndexPage","message"],"sources":["../../../../utils/createContextProvider.tsx","../../../../contexts/peer.tsx","../../../../contexts/room.tsx","../../../../contexts/room.host.tsx","../../../../data-events/onPlayerInitialInfo.ts","../../../../data-events/onRoomUpdate.ts","../../../../utils/DataEvents.ts","../../../../utils/createPersistance.ts","../../../../contexts/player.local.ts","../../../../components/AvatarSelector.tsx","../../../../icons/loading-dots.svg?component-solid","../../../../components/EnterRoomButton.tsx","../../../../components/NicknameInput.tsx","../../../../scenes/EntryScene.tsx","../../../../scenes/GameScene.tsx","../../../../components/StartGameButton.tsx","../../../../components/Tabs.tsx","../../../../icons/options.svg?component-solid","../../../../scenes/LobbyScene.tsx","../../../../contexts/ui.tsx","../../../../components/AlertModal.tsx","../../../../utils/Compose.tsx","../../../../contexts/game.tsx","../../../../utils/contexts.ts","../../../../pages/index/Footer.tsx","../../../../icons/computer-desktop.svg?component-solid","../../../../icons/moon.svg?component-solid","../../../../icons/sun.svg?component-solid","../../../../components/ColorSchemeButton.tsx","../../../../icons/spade.svg?component-solid","../../../../pages/index/Header.tsx","../../../../pages/index/+Page.tsx"],"sourcesContent":["import {\n  ParentProps,\n  createContext,\n  onCleanup,\n  onMount,\n  useContext,\n} from \"solid-js\";\n\nexport function createContextProvider<T, Context = any>(\n  value: T,\n  callbacks: {\n    onInit?: (props: ParentProps) => Context;\n    onMount?: (context?: Context) => Context;\n    onCleanUp?: (context?: Context) => void;\n  } = {}\n) {\n  const Context = createContext(value);\n\n  function Provider(props: ParentProps) {\n    let context = callbacks.onInit?.(props);\n    onMount(() => {\n      context = callbacks.onMount?.(context);\n    });\n    onCleanup(() => callbacks.onCleanUp?.(context));\n    return <Context.Provider value={value}>{props.children}</Context.Provider>;\n  }\n\n  function use() {\n    const value = useContext(Context);\n    if (value === undefined) {\n      throw new Error(`use() must be used within a Context.Provider`);\n    }\n    return value;\n  }\n\n  return { Provider, use };\n}\n","export { PeerJSProvider, createPeer, usePeerJS };\nimport { type Peer } from \"peerjs\";\nimport { createSignal } from \"solid-js\";\nimport { createContextProvider } from \"../utils/createContextProvider\";\n\nconst [_Peer, setPeer] = createSignal<typeof Peer>();\n\nconst { Provider: PeerJSProvider, use: usePeerJS } = createContextProvider(\n  { Peer: _Peer, createPeer },\n  {\n    onMount: () =>\n      import(\"peerjs\").then((PeerJS) => setPeer(() => PeerJS.default)),\n  }\n);\n\nfunction createPeer(...args: ConstructorParameters<typeof Peer>) {\n  const Peer = _Peer();\n  if (!Peer) throw new Error(\"PeerJS referenced before imported\");\n  return new Peer(...args);\n}\n","export { Room, RoomProvider, useRoom };\n\nimport { DataConnection } from \"peerjs\";\nimport { createStore } from \"solid-js/store\";\nimport { createContextProvider } from \"../utils/createContextProvider\";\nimport { AnyError } from \"../utils/errors\";\nimport { Player } from \"./player\";\n\ntype Room = {\n  /** The id of the room */\n  id?: string;\n  /** Is the local player hosting the room? */\n  isHost?: boolean;\n  /** The player hosting the room */\n  hostPlayer?: Player;\n  /** The players currently connected to the room */\n  players: Player[];\n  /** The network connection from the local player to the room */\n  connection?: DataConnection;\n  /** Any error from the room */\n  error?: AnyError;\n};\n\nconst [room, setRoom] = createStore<Room>({ players: [] });\n\nconst { Provider: RoomProvider, use: useRoom } = createContextProvider(\n  { room, setRoom },\n  {\n    onInit() {},\n\n    onMount() {\n      const params = new URLSearchParams(document.location.search);\n      const params_roomId = params.get(\"room\");\n\n      setRoom({\n        id: params_roomId ?? undefined,\n        isHost: params_roomId === null,\n      });\n    },\n\n    onCleanUp() {},\n  }\n);\n","export { createHostRoom, useHostRoom, type HostRoom, type HostedPlayer };\n\nimport { type DataConnection } from \"peerjs\";\nimport { type SetStoreFunction } from \"solid-js/store\";\nimport { DataEventHandlers, type DataEventType } from \"../utils/DataEvents\";\nimport { usePeerJS } from \"./peer\";\nimport { type Player } from \"./player\";\nimport { useRoom, type Room } from \"./room\";\n\ntype HostRoom = Room & {\n  /** The local player is hosting the room */\n  isHost: true;\n  /** The players currently connected to the room */\n  players: HostedPlayer[];\n};\n\ntype HostedPlayer = Partial<Player> & {\n  /** The connection to remote player */\n  connection?: DataConnection;\n};\n\nfunction createHostRoom() {\n  console.log(\"Creating Host Room\");\n  const { hostRoom, setHostRoom } = useHostRoom();\n  const { Peer } = usePeerJS();\n  const peer = new (Peer()!)(hostRoom.id!);\n\n  peer\n    .on(\"error\", (error) => {\n      console.warn(\"Host Room Peer error\", { error });\n      peer.destroy();\n    })\n\n    .on(\"open\", (roomId) => {\n      console.log(\"Room opened\", { roomId });\n      setHostRoom(\"id\", roomId);\n    })\n\n    .on(\"connection\", (connection) => {\n      const peerId = connection.peer;\n      console.log(\"Peer connecting\", { peerId });\n\n      connection\n        .on(\"open\", () => {\n          console.log(\"Peer connected\", { peerId });\n\n          // add player to list\n          const roomPlayer: HostedPlayer = { connection };\n          setHostRoom(\"players\", (players) => [...players, roomPlayer]);\n        })\n\n        .on(\"close\", () => {\n          console.log(\"Player disconnected\", { peerId });\n          setHostRoom(\"players\", (players: HostedPlayer[]) => {\n            return players.filter(\n              ({ connection }) => connection?.peer !== peerId\n            );\n          });\n        })\n\n        .on(\"error\", (error) =>\n          console.warn(\"Player connection error\", { peerId, error })\n        )\n\n        .on(\"data\", (data: any) => {\n          const { type, payload } = data;\n\n          if (type === undefined) {\n            console.warn(\"Malformed data from player\", { peerId, data });\n            return;\n          }\n\n          DataEventHandlers[type as DataEventType](connection, payload);\n        });\n    });\n\n  return { hostRoom, setHostRoom };\n}\n\nconst useHostRoom = () => {\n  const { room: hostRoom, setRoom: setHostRoom } = useRoom() as {\n    room: HostRoom;\n    setRoom: SetStoreFunction<HostRoom>;\n  };\n  return { hostRoom, setHostRoom };\n};\n","import { DataConnection } from \"peerjs\";\nimport { type Player } from \"../contexts/player\";\nimport { HostedPlayer, useHostRoom } from \"../contexts/room.host\";\nimport { DataEvent } from \"../utils/DataEvents\";\n\nexport default {\n  PLAYER_INITIAL_INFO: (connection: DataConnection, playerData: Player) => {\n    const { peer: peerId } = connection;\n    const { hostRoom, setHostRoom } = useHostRoom();\n\n    console.log(\"Initialising player\");\n    console.table({ peerId, ...playerData });\n\n    setHostRoom(\n      \"players\",\n      hostRoom.players.findIndex(\n        (player: HostedPlayer) => player.connection == connection\n      )!,\n      (player: HostedPlayer) => ({ ...player, ...playerData })\n    );\n\n    connection.send(\n      new DataEvent(\"ROOM_UPDATE\", {\n        players: hostRoom.players.map((player) => ({\n          id: player.id!,\n          nickname: player.nickname!,\n          avatarSeed: player.avatarSeed!,\n        })),\n      })\n    );\n  },\n};\n","import { DataConnection } from \"peerjs\";\nimport { useRoom, type Room } from \"../contexts/room\";\n\nexport default {\n  ROOM_UPDATE: function onRoomUpdate(\n    connection: DataConnection,\n    roomUpdate: Partial<Room>\n  ) {\n    const { setRoom } = useRoom();\n    setRoom(roomUpdate);\n    console.log(\"Room Update received\");\n    console.table(roomUpdate);\n  },\n};\n","export { DataEvent, DataEventHandlers, type DataEventType };\n\nimport onPlayerInitialise from \"../data-events/onPlayerInitialInfo\";\nimport onRoomUpdate from \"../data-events/onRoomUpdate\";\n\nconst DataEventHandlers = {\n  // ...onMessage,\n  ...onPlayerInitialise,\n  ...onRoomUpdate,\n};\n\ntype DataEventType = keyof typeof DataEventHandlers;\n\ntype DataEventPayload<T extends DataEventType> = Parameters<\n  (typeof DataEventHandlers)[T]\n>[1];\n\nclass DataEvent<T extends DataEventType> {\n  constructor(type: T, payload: DataEventPayload<T>) {\n    return { type, payload };\n  }\n}\n","import { Accessor, createMemo, on } from \"solid-js\";\n\n/** updates localStorage with supplied values each time they change */\nexport default function createPersistance<T extends string>(\n  ...pairs: [string, Accessor<T | undefined>][]\n) {\n  pairs?.forEach(([key, value]) => _createPersistance(key, value));\n}\n\nfunction _createPersistance<T extends string>(\n  key: string,\n  value: Accessor<T | undefined>\n) {\n  createMemo(\n    on(value, () => localStorage.setItem(key, value()!), { defer: true })\n  );\n}\n","export { LocalPlayerProvider, joinRoom, useLocalPlayer, type LocalPlayer };\n\nimport Peer from \"peerjs\";\nimport { createStore } from \"solid-js/store\";\nimport { usePeerJS } from \"../contexts/peer\";\nimport {\n  DataEvent,\n  DataEventHandlers,\n  type DataEventType,\n} from \"../utils/DataEvents\";\nimport { createContextProvider } from \"../utils/createContextProvider\";\nimport createPersistance from \"../utils/createPersistance\";\nimport { Player } from \"./player\";\nimport { useRoom } from \"./room\";\n\ntype LocalPlayer = Player & {\n  /** The local player's network object */\n  peer?: Peer;\n};\n\nconst [localPlayer, setLocalPlayer] = createStore<LocalPlayer>();\n\nconst { Provider: LocalPlayerProvider, use: useLocalPlayer } =\n  createContextProvider(\n    { localPlayer, setLocalPlayer },\n    {\n      onInit() {\n        createPersistance(\n          [\"playerId\", () => localPlayer.id],\n          [\"nickname\", () => localPlayer.nickname],\n          [\"avatarSeed\", () => localPlayer.avatarSeed]\n        );\n      },\n\n      onMount() {\n        const { createPeer } = usePeerJS();\n        setLocalPlayer({\n          id: localStorage.getItem(\"playerId\") ?? window.crypto.randomUUID(),\n          nickname: localStorage.getItem(\"nickname\") ?? \"\",\n          avatarSeed:\n            localStorage.getItem(\"avatarSeed\") ?? window.crypto.randomUUID(),\n        });\n      },\n\n      onCleanUp() {},\n    }\n  );\n\nfunction joinRoom() {\n  const Peer = usePeerJS().Peer()!;\n  const peer = new Peer(window.crypto.randomUUID());\n  setLocalPlayer({ peer });\n  const { room, setRoom } = useRoom();\n  const roomId = room.id!;\n  peer\n    .on(\"error\", (error) => {\n      console.warn({ roomId, error });\n      setRoom(\"error\", error);\n      peer.destroy();\n    })\n    .on(\"open\", () => {\n      console.log(\"Connecting to room\", { roomId });\n      const roomConnection = peer.connect(roomId);\n\n      roomConnection\n        .on(\"open\", () => {\n          console.log(\"Connected to room\", { roomId });\n          setRoom(\"connection\", roomConnection);\n          roomConnection.send(\n            new DataEvent(\"PLAYER_INITIAL_INFO\", {\n              id: localPlayer.id!,\n              nickname: localPlayer.nickname!,\n              avatarSeed: localPlayer.avatarSeed!,\n            })\n          );\n        })\n\n        .on(\"close\", () => {\n          console.log(\"Disconnected from room\", { roomId });\n        })\n\n        .on(\"error\", (error) => {\n          console.warn(\"Local Player Room error\", { roomId, error });\n          setRoom(\"error\", error);\n        })\n\n        .on(\"data\", (data) => {\n          console.log(`Data from room`, { roomId, data });\n          // console.table(data);\n\n          const { type, payload } = data as any;\n\n          if (type === undefined) {\n            const error = new Error(\"Malformed data from room\", {\n              cause: { roomId, data },\n            });\n            console.warn(error);\n            setRoom(\"error\", error);\n            return;\n          }\n\n          DataEventHandlers[type as DataEventType](roomConnection, payload);\n        });\n    });\n}\n","import { useLocalPlayer } from \"../contexts/player.local\";\nimport { JSX, Show, createMemo } from \"solid-js\";\n\nconst { localPlayer, setLocalPlayer } = useLocalPlayer();\n\nexport default function AvatarSelector(\n  props: JSX.ButtonHTMLAttributes<HTMLButtonElement>\n) {\n  const avatarSrc = createMemo(() => {\n    if (!localPlayer?.avatarSeed) return;\n    return `https://api.dicebear.com/7.x/lorelei/svg?seed=${localPlayer.avatarSeed!}`;\n  });\n\n  return (\n    <button\n      {...props}\n      id=\"avatar_selector_button\"\n      class=\"container border-3 border-dashed shadow shadow-small\"\n      style={{\n        \"font-size\": \"x-large\",\n        \"max-width\": \"28ch\",\n        \"aspect-ratio\": 1,\n        height: \"auto\",\n      }}\n      onClick={randomiseAvatar}\n    >\n      <Show when={avatarSrc()}>\n        <img\n          alt=\"avatar\"\n          draggable=\"false\"\n          style={{\n            margin: 0,\n            border: 0,\n          }}\n          src={avatarSrc()}\n        />\n      </Show>\n    </button>\n  );\n}\n\nfunction randomiseAvatar() {\n  setLocalPlayer(\"avatarSeed\", window.crypto.randomUUID());\n}\n","export default (props = {}) => <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\"{...props}><style>@keyframes spinner_xe7Q{'{'}93.75%,to{'{'}r:3px{'}'}46.875%{'{'}r:.2px{'}'}{'}'}.spinner_b2T7{'{'}animation:spinner_xe7Q .8s linear infinite{'}'}</style><circle cx=\"4\" cy=\"12\" r=\"3\" class=\"spinner_b2T7\"/><circle cx=\"12\" cy=\"12\" r=\"3\" class=\"spinner_b2T7\" style=\"animation-delay:-.65s\"/><circle cx=\"20\" cy=\"12\" r=\"3\" class=\"spinner_b2T7\" style=\"animation-delay:-.5s\"/></svg>","import { useRoom } from \"../contexts/room\";\nimport { Accessor, JSX, createMemo } from \"solid-js\";\nimport loadingDotsSVG from \"../icons/loading-dots.svg?component-solid\";\n\nconst { room } = useRoom();\n\ntype EnterRoomButtonProps = JSX.ButtonHTMLAttributes<HTMLButtonElement> & {\n  loading: Accessor<boolean>;\n};\n\nexport default function EnterRoomButton(props: EnterRoomButtonProps) {\n  const { loading = () => true } = props;\n\n  const innerHTML = createMemo(() => (\n    <>\n      {loading() ? loadingDotsSVG : `⚔ ${room?.isHost ? \"Host\" : \"Join\"} Room`}\n    </>\n  ));\n\n  return (\n    <button\n      {...props}\n      id=\"enter_room_button\"\n      class=\"btn-secondary-outline\"\n      style=\"fill:var(--secondary); min-width: 11ch; max-width: fit-content; font-size: xx-large; font-variant: small-caps\"\n    >\n      {props.children ?? innerHTML()}\n    </button>\n  );\n}\n","import { JSX } from \"solid-js\";\nimport { useLocalPlayer } from \"../contexts/player.local\";\n\nexport default function NicknameInput(\n  props: JSX.InputHTMLAttributes<HTMLInputElement>\n) {\n  const { localPlayer, setLocalPlayer } = useLocalPlayer();\n\n  return (\n    <input\n      {...props}\n      id=\"nickname_name_input\"\n      type=\"text\"\n      placeholder=\"nickname goes here\"\n      class=\"container border-3 border-dashed shadow shadow-hover shadow-small\"\n      maxlength=\"24\"\n      style={{\n        \"text-align\": \"center\",\n        \"font-size\": \"x-large\",\n        \"max-width\": \"28ch\",\n      }}\n      value={localPlayer?.nickname}\n      onInput={(event) => setLocalPlayer(\"nickname\", event.target.value)}\n    />\n  );\n}\n","import { createEffect, createMemo, createSignal, on } from \"solid-js\";\nimport AvatarSelector from \"../components/AvatarSelector\";\nimport EnterRoomButton from \"../components/EnterRoomButton\";\nimport NicknameInput from \"../components/NicknameInput\";\nimport { joinRoom, useLocalPlayer } from \"../contexts/player.local\";\nimport { useRoom } from \"../contexts/room\";\nimport { createHostRoom } from \"../contexts/room.host\";\nimport { useUI } from \"../contexts/ui\";\nimport \"./EntryScene.css\";\n\nexport default function EntryScene() {\n  const { localPlayer } = useLocalPlayer();\n  const { room } = useRoom();\n  const { UI, setUI } = useUI();\n  const [isPendingEntry, setIsPendingEntry] = createSignal(false);\n\n  // when room is connected,\n  // transition to Lobby\n  createMemo(\n    on(\n      () => room.connection,\n      () => setUI(\"scene\", { name: \"Lobby\" }),\n      { defer: true }\n    )\n  );\n\n  // when host room is ready,\n  // join as host player\n  createEffect(\n    on(\n      () => room.id,\n      () => {\n        if (room.isHost) joinRoom();\n      },\n      { defer: true }\n    )\n  );\n\n  // when alert modal closes,\n  // re-enable inputs\n  createEffect(() => {\n    if (!UI.alert.show) setIsPendingEntry(false);\n  });\n\n  function enterRoom() {\n    setIsPendingEntry(true);\n    const { room } = useRoom();\n    if (room.isHost) {\n      createHostRoom(); // local player will autojoin when host room is ready\n    } else {\n      joinRoom();\n    }\n  }\n\n  return (\n    <>\n      <section>\n        <AvatarSelector disabled={isPendingEntry()} />\n        <NicknameInput disabled={isPendingEntry()} />\n      </section>\n      <EnterRoomButton\n        disabled={!localPlayer?.nickname || isPendingEntry()}\n        onclick={enterRoom}\n        loading={isPendingEntry}\n      />\n    </>\n  );\n}\n","export default function GameLayout() {\n  return <>Game Layout</>;\n}\n","import { Accessor, JSX, createMemo } from \"solid-js\";\nimport loadingDotsSVG from \"../icons/loading-dots.svg?component-solid\";\n\ntype StartGameButtonProps = JSX.ButtonHTMLAttributes<HTMLButtonElement> & {\n  loading: Accessor<boolean>;\n};\n\nexport default function StartGameButton(props: StartGameButtonProps) {\n  const { loading = () => true } = props;\n\n  const innerHTML = createMemo(() => (\n    <>{loading() ? loadingDotsSVG : \"⚔ Start Game\"}</>\n  ));\n\n  return (\n    <button\n      {...props}\n      id=\"start_game_button\"\n      class=\"btn-secondary-outline\"\n      style=\"fill:var(--secondary); min-width: 11ch; max-width: fit-content; font-size: xx-large; font-variant: small-caps\"\n    >\n      {props.children ?? innerHTML()}\n    </button>\n  );\n}\n","import { For, JSX } from \"solid-js\";\n\ntype TabsProps = {\n  activeTab?: number;\n  tabs: Array<{\n    label: JSX.Element;\n    content: JSX.Element;\n  }>;\n};\n\nexport default function Tabs(props: TabsProps) {\n  const activeTab = props.activeTab ?? 0;\n  return (\n    <div class=\"row flex-spaces tabs\">\n      <For each={props.tabs}>\n        {(tab, i) => (\n          <>\n            <input\n              id={`tab${i() + 1}`}\n              type=\"radio\"\n              name=\"tabs\"\n              checked={i() == activeTab}\n            />\n            <label for={`tab${i() + 1}`}>{tab.label}</label>\n          </>\n        )}\n      </For>\n      <For each={props.tabs}>\n        {(tab, i) => (\n          <div id={`content${i() + 1}`} class=\"content\">\n            {tab.content}\n          </div>\n        )}\n      </For>\n    </div>\n  );\n}\n","export default (props = {}) => <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"1em\" height=\"1em\" fill=\"none\" stroke-width=\"0\" style=\"overflow:visible;color:currentcolor\" viewBox=\"0 -4 24 24\"{...props}><path fill=\"currentColor\" fill-rule=\"evenodd\" d=\"M7 3a4.002 4.002 0 0 1 3.874 3H19v2h-8.126A4.002 4.002 0 0 1 3 7a4 4 0 0 1 4-4m0 6a2 2 0 1 0 0-4 2 2 0 0 0 0 4m10 11a4.002 4.002 0 0 1-3.874-3H5v-2h8.126A4.002 4.002 0 0 1 21 16a4 4 0 0 1-4 4m0-2a2 2 0 1 0 0-4 2 2 0 0 0 0 4\" clip-rule=\"evenodd\"/></svg>","import { Index, onMount } from \"solid-js\";\nimport StartGameButton from \"../components/StartGameButton\";\nimport Tabs from \"../components/Tabs\";\nimport { useRoom } from \"../contexts/room\";\nimport optionsSVG from \"../icons/options.svg?component-solid\";\nimport \"./LobbyScene.css\";\n\nexport default function LobbyLayout() {\n  const { room } = useRoom();\n\n  onMount(() => {\n    const params = new URLSearchParams(document.location.search);\n    const params_roomId = params.get(\"room\");\n    if (params_roomId == null) history.pushState({}, \"\", `?room=${room.id!}`);\n  });\n\n  return (\n    <>\n      <Tabs\n        activeTab={0}\n        tabs={[\n          {\n            label: `${room.players.length} : Lobby`,\n            content: (\n              <Index each={room.players}>\n                {(player, i) => {\n                  return (\n                    <li style={{ \"font-size\": \"xx-large\" }}>\n                      {player().nickname ?? `Player ${i + 1} is joining...`}\n                    </li>\n                  );\n                }}\n              </Index>\n            ),\n          },\n          {\n            label: <>{optionsSVG} Options</>,\n            content: \"settings...\",\n          },\n        ]}\n      />\n      <StartGameButton loading={() => false} />\n    </>\n  );\n}\n","export { ColorScheme, ColorSchemeOption, Provider as UIProvider, use as useUI };\n\nimport { JSX, createEffect, on } from \"solid-js\";\nimport { createStore } from \"solid-js/store\";\nimport EntryScene from \"../scenes/EntryScene\";\nimport GameScene from \"../scenes/GameScene\";\nimport LobbyScene from \"../scenes/LobbyScene\";\nimport { createContextProvider } from \"../utils/createContextProvider\";\nimport createPersistance from \"../utils/createPersistance\";\n\nconst colorSchemes_matchMedia = [\"light\", \"dark\"] as const;\nconst colorSchemes = colorSchemes_matchMedia;\ntype ColorScheme = (typeof colorSchemes)[number];\nconst colorSchemeOptions = [\"system\", ...colorSchemes] as const;\ntype ColorSchemeOption = (typeof colorSchemeOptions)[number];\n\nconst scenes = {\n  Entry: EntryScene,\n  Lobby: LobbyScene,\n  Game: GameScene,\n};\n\ntype UIState = {\n  colorScheme: {\n    isDark: boolean;\n    setting: ColorSchemeOption;\n    toggleSetting: () => void;\n  };\n  scene: {\n    name: keyof typeof scenes;\n    component: (typeof scenes)[keyof typeof scenes];\n  };\n  alert: {\n    show: boolean;\n    level:\n      | \"alert-primary\"\n      | \"alert-secondary\"\n      | \"alert-success\"\n      | \"alert-warning\"\n      | \"alert-danger\";\n    innerHTML?: JSX.Element;\n    dialogRef?: HTMLDialogElement;\n  };\n};\n\nconst [UI, setUI] = createStore<UIState>({\n  colorScheme: {\n    isDark: false,\n    setting: \"system\",\n    toggleSetting: toggleColorSchemeSetting,\n  },\n  scene: { name: \"Entry\", component: EntryScene },\n  alert: {\n    show: false,\n    level: \"alert-warning\",\n    innerHTML: \"Hello, world!\",\n  },\n});\n\nconst { Provider, use } = createContextProvider(\n  { UI, setUI },\n  {\n    onInit() {\n      createPersistance([\"colorSchemeSetting\", () => UI.colorScheme.setting]);\n\n      // apply dark mode class on the html element\n      createEffect(\n        on(\n          () => UI.colorScheme.isDark,\n          () => {\n            UI.colorScheme.isDark\n              ? document.documentElement.classList.add(\"dark\")\n              : document.documentElement.classList.remove(\"dark\");\n          },\n          { defer: false }\n        )\n      );\n\n      // set isDark based on setting\n      createEffect(() => {\n        setUI(\n          \"colorScheme\",\n          \"isDark\",\n          UI.colorScheme.setting !== \"system\"\n            ? UI.colorScheme.setting === \"dark\"\n            : isSystemDark() ?? UI.colorScheme.isDark\n        );\n      });\n\n      // when scene name changes\n      // update component to match\n      createEffect(\n        on(\n          () => UI.scene.name,\n          () => setUI(\"scene\", { component: scenes[UI.scene.name] }),\n          { defer: true }\n        )\n      );\n    },\n\n    onMount() {\n      const colorSchemeSetting =\n        (localStorage.getItem(\"colorSchemeSetting\") as ColorSchemeOption) ??\n        UI.colorScheme.setting;\n\n      setUI(\"colorScheme\", \"setting\", colorSchemeSetting);\n\n      window\n        .matchMedia(\"(prefers-color-scheme: dark)\")\n        .addEventListener(\"change\", ({ matches: isDark }) => {\n          if (UI.colorScheme.setting !== \"system\") return;\n          setUI(\"colorScheme\", { isDark });\n        });\n    },\n\n    onCleanUp() {},\n  }\n);\n\nfunction isSystemDark(): boolean | undefined {\n  if (window.matchMedia === undefined) return;\n  return window.matchMedia(`(prefers-color-scheme: dark)`).matches;\n}\n\nfunction toggleColorSchemeSetting() {\n  const current_idx = colorSchemeOptions.indexOf(UI.colorScheme.setting);\n  const new_idx = (current_idx + 1) % colorSchemeOptions.length;\n  setUI(\"colorScheme\", \"setting\", colorSchemeOptions[new_idx]);\n}\n","import { createEffect, on } from \"solid-js\";\nimport { useUI } from \"../contexts/ui\";\nimport \"./AlertModal.css\";\n\nexport default () => {\n  const { UI, setUI } = useUI();\n\n  createEffect(\n    on(\n      () => UI.alert.show,\n      () => {\n        if (UI.alert.show) {\n          UI.alert.dialogRef?.showModal();\n        } else {\n          UI.alert.dialogRef?.close();\n        }\n      },\n      { defer: true }\n    )\n  );\n\n  createEffect(() =>\n    UI.alert.dialogRef!.addEventListener(\"close\", () =>\n      setUI(\"alert\", { show: false })\n    )\n  );\n\n  return (\n    <dialog ref={(dialogRef) => setUI(\"alert\", { dialogRef })}>\n      <input id=\"alertModal\" class=\"alert-state\" type=\"checkbox\" />\n      <div class={\"alert  \" + UI.alert.level}>\n        {UI.alert.innerHTML}\n        <label\n          class=\"btn-close\"\n          for=\"alertModal\"\n          onclick={() => UI.alert.dialogRef?.close()}\n          innerText=\"X\"\n        />\n      </div>\n    </dialog>\n  );\n};\n","import { Component, ParentProps } from \"solid-js\";\nimport { JSX } from \"solid-js/jsx-runtime\";\n\ntype ComposeProps = ParentProps & { components: Component<any>[] };\n\nexport default function Compose(props: ComposeProps): JSX.Element {\n  const { components = [], children } = props;\n\n  return (\n    <>\n      {components.reduceRight(\n        (ComponentStack, Component) => (\n          <Component>{ComponentStack}</Component>\n        ),\n        children\n      )}\n    </>\n  );\n}\n","export { Game, GameProvider, useGame };\nimport { createStore } from \"solid-js/store\";\nimport { createContextProvider } from \"../utils/createContextProvider\";\n\ntype Player = {};\ntype Pile = {\n  cards: Card[];\n  draw?: (amount: number) => Card[];\n  add?: (...cards: Card[]) => void;\n  shuffle?: () => {};\n};\n\ntype Suit = \"♠\" | \"♥\" | \"♦\" | \"♣\";\ntype Rank =\n  | \"2\"\n  | \"3\"\n  | \"4\"\n  | \"5\"\n  | \"6\"\n  | \"7\"\n  | \"8\"\n  | \"9\"\n  | \"10\"\n  | \"J\"\n  | \"Q\"\n  | \"K\"\n  | \"A\";\n\ntype Card = { suit: Suit; rank: Rank };\n\ntype Game = {\n  players?: Player[];\n  currentPlayerIndex?: number;\n  piles?: {\n    deck: Pile;\n    [pile: string]: Pile;\n  };\n};\n\nconst [game, setGame] = createStore<Game>({});\n\nconst { Provider: GameProvider, use: useGame } = createContextProvider(\n  { game, setGame },\n  {\n    onInit() {\n      // console.log(\"[Game Context] Initialising\");\n    },\n\n    onMount() {\n      // console.log(\"[Game Context] Mounted\");\n    },\n\n    onCleanUp() {\n      // console.log(\"[Game Context] Cleaning\");\n    },\n  }\n);\n","import { GameProvider } from \"../contexts/game\";\nimport { LocalPlayerProvider } from \"../contexts/player.local\";\nimport { PeerJSProvider } from \"../contexts/peer\";\nimport { RoomProvider } from \"../contexts/room\";\nimport { UIProvider } from \"../contexts/ui\";\n\nexport default [\n  GameProvider,\n  LocalPlayerProvider,\n  PeerJSProvider,\n  RoomProvider,\n  UIProvider,\n];\n","import \"./Footer.module.css\";\n\nexport default () => (\n  <footer>\n    <p\n      // @ts-expect-error\n      xmlns:cc=\"http://creativecommons.org/ns#\"\n      xmlns:dct=\"http://purl.org/dc/terms/\"\n    >\n      <a\n        rel=\"cc:attributionURL\"\n        property=\"dct:title\"\n        href=\"https://github.com/jgrunik/upgrade\"\n      >\n        Upgrade\n      </a>\n      &nbsp;is licenced under\n      <a\n        style=\"display: inline-flex; margin-left: 0.5ch;\"\n        rel=\"license noopener noreferrer\"\n        href=\"http://creativecommons.org/licenses/by-nc-sa/4.0/\"\n        target=\"_blank\"\n        innerText=\"CC BY-NC-SA 4.0\"\n      />\n      <span style=\"display: inline-flex; height: 1.75ch; margin-left: 0.5ch;\">\n        <img src=\"https://mirrors.creativecommons.org/presskit/icons/cc.svg\" />\n        <img src=\"https://mirrors.creativecommons.org/presskit/icons/by.svg\" />\n        <img src=\"https://mirrors.creativecommons.org/presskit/icons/nc.svg\" />\n        <img src=\"https://mirrors.creativecommons.org/presskit/icons/sa.svg\" />\n      </span>\n    </p>\n  </footer>\n);\n","export default (props = {}) => <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"1em\" height=\"1em\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"0\" style=\"overflow:visible;color:currentcolor\" viewBox=\"0 0 24 24\"{...props}><path fill=\"currentColor\" fill-rule=\"evenodd\" stroke=\"none\" d=\"M2.25 5.25a3 3 0 0 1 3-3h13.5a3 3 0 0 1 3 3V15a3 3 0 0 1-3 3h-3v.257c0 .597.237 1.17.659 1.591l.621.622a.75.75 0 0 1-.53 1.28h-9a.75.75 0 0 1-.53-1.28l.621-.622a2.25 2.25 0 0 0 .659-1.59V18h-3a3 3 0 0 1-3-3zm1.5 0v7.5a1.5 1.5 0 0 0 1.5 1.5h13.5a1.5 1.5 0 0 0 1.5-1.5v-7.5a1.5 1.5 0 0 0-1.5-1.5H5.25a1.5 1.5 0 0 0-1.5 1.5\" clip-rule=\"evenodd\"/></svg>","export default (props = {}) => <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"1em\" height=\"1em\" fill=\"currentColor\" stroke-width=\"0\" style=\"overflow:visible;color:currentcolor\" viewBox=\"0 0 16 16\"{...props}><path d=\"M6 .278a.768.768 0 0 1 .08.858 7.208 7.208 0 0 0-.878 3.46c0 4.021 3.278 7.277 7.318 7.277.527 0 1.04-.055 1.533-.16a.787.787 0 0 1 .81.316.733.733 0 0 1-.031.893A8.349 8.349 0 0 1 8.344 16C3.734 16 0 12.286 0 7.71 0 4.266 2.114 1.312 5.124.06A.752.752 0 0 1 6 .278\"/><path d=\"M10.794 3.148a.217.217 0 0 1 .412 0l.387 1.162c.173.518.579.924 1.097 1.097l1.162.387a.217.217 0 0 1 0 .412l-1.162.387a1.734 1.734 0 0 0-1.097 1.097l-.387 1.162a.217.217 0 0 1-.412 0l-.387-1.162A1.734 1.734 0 0 0 9.31 6.593l-1.162-.387a.217.217 0 0 1 0-.412l1.162-.387a1.734 1.734 0 0 0 1.097-1.097zM13.863.099a.145.145 0 0 1 .274 0l.258.774c.115.346.386.617.732.732l.774.258a.145.145 0 0 1 0 .274l-.774.258a1.156 1.156 0 0 0-.732.732l-.258.774a.145.145 0 0 1-.274 0l-.258-.774a1.156 1.156 0 0 0-.732-.732l-.774-.258a.145.145 0 0 1 0-.274l.774-.258c.346-.115.617-.386.732-.732z\"/></svg>","export default (props = {}) => <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"1em\" height=\"1em\" fill=\"currentColor\" stroke-width=\"0\" style=\"overflow:visible;color:currentcolor\" viewBox=\"0 0 16 16\"{...props}><path d=\"M8 12a4 4 0 1 0 0-8 4 4 0 0 0 0 8M8 0a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-1 0v-2A.5.5 0 0 1 8 0m0 13a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-1 0v-2A.5.5 0 0 1 8 13m8-5a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1 0-1h2a.5.5 0 0 1 .5.5M3 8a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1 0-1h2A.5.5 0 0 1 3 8m10.657-5.657a.5.5 0 0 1 0 .707l-1.414 1.415a.5.5 0 1 1-.707-.708l1.414-1.414a.5.5 0 0 1 .707 0m-9.193 9.193a.5.5 0 0 1 0 .707L3.05 13.657a.5.5 0 0 1-.707-.707l1.414-1.414a.5.5 0 0 1 .707 0m9.193 2.121a.5.5 0 0 1-.707 0l-1.414-1.414a.5.5 0 0 1 .707-.707l1.414 1.414a.5.5 0 0 1 0 .707M4.464 4.465a.5.5 0 0 1-.707 0L2.343 3.05a.5.5 0 1 1 .707-.707l1.414 1.414a.5.5 0 0 1 0 .708\"/></svg>","import { createMemo } from \"solid-js\";\nimport { useUI } from \"../contexts/ui\";\nimport systemIcon from \"../icons/computer-desktop.svg?component-solid\";\nimport darkIcon from \"../icons/moon.svg?component-solid\";\nimport lightIcon from \"../icons/sun.svg?component-solid\";\n\nconst IconList = {\n  system: systemIcon,\n  dark: darkIcon,\n  light: lightIcon,\n} as const;\n\nexport default function ColorSchemeButton() {\n  const { UI } = useUI();\n\n  const icon = createMemo(() => IconList[UI.colorScheme.setting]);\n\n  return (\n    <button\n      class=\"card border\"\n      style=\"margin-right: 0; margin: 0; padding: 0.5rem\"\n      popover-left={`color scheme '${UI.colorScheme.setting}'`}\n      onClick={UI.colorScheme.toggleSetting}\n    >\n      {\n        // @ts-expect-error\n        icon()\n      }\n    </button>\n  );\n}\n","export default (props = {}) => <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"1em\" height=\"1em\" fill=\"currentColor\" stroke-width=\"0\" style=\"overflow:visible;color:currentcolor\" viewBox=\"0 0 16 16\"{...props}><path d=\"M12.775 5.44C9.751 3.192 8.708 1.393 8.001 0c-.708 1.393-1.75 3.192-4.774 5.44-5.157 3.833-.303 9.182 3.965 6.238-.278 1.827-1.227 3.159-2.191 3.733v.59h6v-.59c-.964-.574-1.913-1.906-2.191-3.733 4.268 2.944 9.122-2.405 3.965-6.238\"/></svg>","import ColorSchemeButton from \"../../components/ColorSchemeButton\";\nimport spadeSVG from \"../../icons/spade.svg?component-solid\";\nimport \"./Header.module.css\";\n\nexport default () => (\n  <header class=\"not-selectable\">\n    <h1>\n      {\n        //@ts-expect-error\n        spadeSVG\n      }{\" \"}\n      Upgrade\n    </h1>\n    <ColorSchemeButton />\n  </header>\n);\n","import { createEffect, on } from \"solid-js\";\nimport AlertModal from \"../../components/AlertModal\";\nimport { useRoom } from \"../../contexts/room\";\nimport { useUI } from \"../../contexts/ui\";\nimport Compose from \"../../utils/Compose\";\nimport contexts from \"../../utils/contexts\";\nimport Footer from \"./Footer\";\nimport Header from \"./Header\";\nimport \"./Page.css\";\n\nconst { UI } = useUI();\nconst { room } = useRoom();\n\nexport default function IndexPage() {\n  const { setUI } = useUI();\n  // when a room error occurs,\n  // show alert modal\n  createEffect(\n    on(\n      () => room.error!,\n      (error) => {\n        switch (error.type ?? error.name) {\n          case \"peer-unavailable\": {\n            setUI(\"alert\", {\n              show: true,\n              level: \"alert-warning\",\n              innerHTML: \"Could not connect to room 🤔\",\n            });\n            break;\n          }\n          case \"unavailable-id\": {\n            setUI(\"alert\", {\n              show: true,\n              level: \"alert-warning\",\n              innerHTML: \"You are already in a room 🤔\",\n            });\n            break;\n          }\n          default: {\n            setUI(\"alert\", {\n              show: true,\n              level: \"alert-danger\",\n              innerHTML: error.message,\n            });\n          }\n        }\n      },\n      { defer: true }\n    )\n  );\n\n  return (\n    <Compose components={contexts}>\n      <Header />\n      <main>{UI.scene.component()}</main>\n      <Footer />\n      <AlertModal />\n    </Compose>\n  );\n}\n"],"file":"assets/entries/pages_index.2qvs_0oJ.js"}