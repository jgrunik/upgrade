import{c as g,a as d,b as f,u as I,d as E,o as v,e as B,f as w,h as R,j as P,g as c,k as m,l as h,S as H,r as u,t as i,s as M,m as p,n as y,p as S,i as z}from"../chunks/chunk-aKhIEBux.js";import{_ as L}from"../chunks/chunk-9zjs2ake.js";function N(e){const{components:t=[],children:r}=e;return g(()=>t.reduceRight((n,s)=>d(s,{children:n}),r))}const[A,O]=f(),D=E(A);function j(e){return v(async()=>{let t=localStorage.getItem("peerId");t||(t=window.crypto.randomUUID(),localStorage.setItem("peerId",t));const r=(await L(()=>import("../chunks/chunk-0Ct39pI4.js"),__vite__mapDeps([]))).default;O(new r(t))}),d(D.Provider,{value:A,get children(){return e.children}})}function F(){const e=I(D);if(e===void 0)throw new Error("usePeer must be used within a PeerContext.Provider");return e}const[$,k]=B(),U=E({room:$,setRoom:k});function T(e){return v(async()=>{let t={};const n=new URLSearchParams(document.location.search).get("room");if(t.isHost=n===null,t.id=n??window.crypto.randomUUID(),t.isHost){const s=(await L(()=>import("../chunks/chunk-0Ct39pI4.js"),__vite__mapDeps([]))).default;t.peer=new s(t.id)}k(t)}),w(R(()=>$.id,()=>localStorage.setItem("roomId",$.id),{defer:!0})),d(U.Provider,{value:{room:$,setRoom:k},get children(){return e.children}})}function V(){const e=I(U);if(e===void 0)throw new Error("useRoom must be used within a RoomContext.Provider");return e}const G=i("<img alt=avatar draggable=false>"),J=i('<button id=avatar_selector_button class="container border-3 border-dashed shadow shadow-small">');function Y(e){const[t,r]=f(),n=g(()=>`https://api.dicebear.com/7.x/lorelei/svg?seed=${t()}`);function s(o=window.crypto.randomUUID()){localStorage.setItem("avatarSeed",o),r(o)}v(()=>{s(localStorage.getItem("avatarSeed")??void 0)});function l(){s()}return(()=>{const o=c(J);return o.$$click=l,o.style.setProperty("font-size","x-large"),o.style.setProperty("max-width","28ch"),o.style.setProperty("aspect-ratio","1"),o.style.setProperty("height","auto"),m(o,d(H,{get when(){return t()},get children(){const a=c(G);return a.style.setProperty("margin","0"),a.style.setProperty("border","0"),h(()=>M(a,"src",n())),a}})),h(()=>p(o,"disabled",e.isDisabled?e.isDisabled():!1)),u(),o})()}P(["click"]);const q=i("<button id=enter_room_button class=btn-secondary-outline style=max-width:fit-content;font-size:xx-large;font-variant:small-caps>");function K(){const[e,t]=f(!1),{room:r}=V(),n=g(()=>`⚔ ${r!=null&&r.isHost?"Host":"Join"} Room`);function s(){return(()=>{const l=c(q);return l.$$click=()=>{e()||(r.isHost&&history.pushState(null,"",`?room=${r.id}`),t(!0))},h(o=>{const a=e(),_=n();return a!==o._v$&&p(l,"disabled",o._v$=a),_!==o._v$2&&p(l,"innerText",o._v$2=_),o},{_v$:void 0,_v$2:void 0}),u(),l})()}return{EnterRoomButton:s,isEnteringRoom:e}}P(["click"]);const Q=i('<input id=nickname_name_input type=text placeholder="nickname goes here ♥"class="container border-3 border-dashed shadow shadow-hover shadow-small"maxlength=24>');function W(e){const[t,r]=f("");return v(()=>{r(localStorage.getItem("nickname")??"")}),(()=>{const n=c(Q);return n.$$input=s=>localStorage.setItem("nickname",s.target.value),n.style.setProperty("text-align","center"),n.style.setProperty("font-size","x-large"),n.style.setProperty("max-width","28ch"),h(()=>p(n,"disabled",e.isDisabled?e.isDisabled():!1)),h(()=>p(n,"value",t())),u(),n})()}P(["input"]);const X=i("<section><!$><!/><!$><!/>");function Z(){const{EnterRoomButton:e,isEnteringRoom:t}=K();return{EntryLayout:()=>[(()=>{const r=c(X),n=r.firstChild,[s,l]=y(n.nextSibling),o=s.nextSibling,[a,_]=y(o.nextSibling);return m(r,d(Y,{isDisabled:t}),s,l),m(r,d(W,{isDisabled:t}),a,_),r})(),d(e,{})],isEnteringRoom:t}}const ee=i('<footer><p xmlns:cc=http://creativecommons.org/ns# xmlns:dct=http://purl.org/dc/terms/><a rel=cc:attributionURL property=dct:title href=https://github.com/jgrunik/upgrade>Upgrade</a>&nbsp;by&nbsp;<a rel="cc:attributionURL dct:creator"property=cc:attributionName href=https://github.com/jgrunik>Joshua Grunik</a>&nbsp;is licensed under&nbsp;<a rel="license noopener noreferrer"href=http://creativecommons.org/licenses/by-nc-sa/4.0/ target=_blank>CC BY-NC-SA 4.0</a><br><span style=display:inline-flex;height:2ch><img src=https://mirrors.creativecommons.org/presskit/icons/cc.svg><img src=https://mirrors.creativecommons.org/presskit/icons/by.svg><img src=https://mirrors.creativecommons.org/presskit/icons/nc.svg><img src=https://mirrors.creativecommons.org/presskit/icons/sa.svg>'),te=()=>c(ee),oe=i('<svg xmlns=http://www.w3.org/2000/svg width=1em height=1em fill=none stroke=currentColor stroke-width=0 style=overflow:visible;color:currentcolor viewBox="0 0 24 24"><path fill=currentColor fill-rule=evenodd stroke=none d="M2.25 5.25a3 3 0 0 1 3-3h13.5a3 3 0 0 1 3 3V15a3 3 0 0 1-3 3h-3v.257c0 .597.237 1.17.659 1.591l.621.622a.75.75 0 0 1-.53 1.28h-9a.75.75 0 0 1-.53-1.28l.621-.622a2.25 2.25 0 0 0 .659-1.59V18h-3a3 3 0 0 1-3-3zm1.5 0v7.5a1.5 1.5 0 0 0 1.5 1.5h13.5a1.5 1.5 0 0 0 1.5-1.5v-7.5a1.5 1.5 0 0 0-1.5-1.5H5.25a1.5 1.5 0 0 0-1.5 1.5"clip-rule=evenodd>'),re=(e={})=>(()=>{const t=c(oe);return S(t,e,!0,!0),u(),t})(),ne=i('<svg xmlns=http://www.w3.org/2000/svg width=1em height=1em fill=currentColor stroke-width=0 style=overflow:visible;color:currentcolor viewBox="0 0 16 16"><path d="M6 .278a.768.768 0 0 1 .08.858 7.208 7.208 0 0 0-.878 3.46c0 4.021 3.278 7.277 7.318 7.277.527 0 1.04-.055 1.533-.16a.787.787 0 0 1 .81.316.733.733 0 0 1-.031.893A8.349 8.349 0 0 1 8.344 16C3.734 16 0 12.286 0 7.71 0 4.266 2.114 1.312 5.124.06A.752.752 0 0 1 6 .278"></path><path d="M10.794 3.148a.217.217 0 0 1 .412 0l.387 1.162c.173.518.579.924 1.097 1.097l1.162.387a.217.217 0 0 1 0 .412l-1.162.387a1.734 1.734 0 0 0-1.097 1.097l-.387 1.162a.217.217 0 0 1-.412 0l-.387-1.162A1.734 1.734 0 0 0 9.31 6.593l-1.162-.387a.217.217 0 0 1 0-.412l1.162-.387a1.734 1.734 0 0 0 1.097-1.097zM13.863.099a.145.145 0 0 1 .274 0l.258.774c.115.346.386.617.732.732l.774.258a.145.145 0 0 1 0 .274l-.774.258a1.156 1.156 0 0 0-.732.732l-.258.774a.145.145 0 0 1-.274 0l-.258-.774a1.156 1.156 0 0 0-.732-.732l-.774-.258a.145.145 0 0 1 0-.274l.774-.258c.346-.115.617-.386.732-.732z">'),se=(e={})=>(()=>{const t=c(ne);return S(t,e,!0,!0),u(),t})(),ae=i('<svg xmlns=http://www.w3.org/2000/svg width=1em height=1em fill=currentColor stroke-width=0 style=overflow:visible;color:currentcolor viewBox="0 0 16 16"><path d="M8 12a4 4 0 1 0 0-8 4 4 0 0 0 0 8M8 0a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-1 0v-2A.5.5 0 0 1 8 0m0 13a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-1 0v-2A.5.5 0 0 1 8 13m8-5a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1 0-1h2a.5.5 0 0 1 .5.5M3 8a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1 0-1h2A.5.5 0 0 1 3 8m10.657-5.657a.5.5 0 0 1 0 .707l-1.414 1.415a.5.5 0 1 1-.707-.708l1.414-1.414a.5.5 0 0 1 .707 0m-9.193 9.193a.5.5 0 0 1 0 .707L3.05 13.657a.5.5 0 0 1-.707-.707l1.414-1.414a.5.5 0 0 1 .707 0m9.193 2.121a.5.5 0 0 1-.707 0l-1.414-1.414a.5.5 0 0 1 .707-.707l1.414 1.414a.5.5 0 0 1 0 .707M4.464 4.465a.5.5 0 0 1-.707 0L2.343 3.05a.5.5 0 1 1 .707-.707l1.414 1.414a.5.5 0 0 1 0 .708">'),ce=(e={})=>(()=>{const t=c(ae);return S(t,e,!0,!0),u(),t})(),ie=i('<button class="card border"style=margin-right:0;margin:0;padding:0.5rem>'),le=["light","dark"],de=le,x=["system",...de],me={system:re,dark:se,light:ce};function ue(){const[e,t]=f("system"),r=g(()=>me[e()]);let n,s=!1;v(()=>{n=g(()=>{let o=e();return o=="system"?C():o}),w(o=>{const a=n();a=="dark"&&o!="dark"&&document.documentElement.classList.add("dark"),a=="light"&&o!="light"&&document.documentElement.classList.remove("dark")}),t(localStorage.getItem("colorScheme")??(C()&&"system")??"light"),window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",o=>{s&&(console.log(o.matches?"dark":"light"),t("system"))}),w(()=>{s=e()=="system"})});function l(){const a=(x.indexOf(e())+1)%x.length;t(x[a])}return(()=>{const o=c(ie);return o.addEventListener("click",()=>(l(),localStorage.setItem("colorScheme",e()))),m(o,r),h(()=>M(o,"popover-left",`color scheme '${e()}'`)),o})()}function C(){switch(!0){default:case window.matchMedia==null:return;case window.matchMedia("(prefers-color-scheme: dark)").matches:return"dark";case window.matchMedia("(prefers-color-scheme: light)").matches:return"light"}}const he=i('<svg xmlns=http://www.w3.org/2000/svg width=1em height=1em fill=currentColor stroke-width=0 style=overflow:visible;color:currentcolor viewBox="0 0 16 16"><path d="M12.775 5.44C9.751 3.192 8.708 1.393 8.001 0c-.708 1.393-1.75 3.192-4.774 5.44-5.157 3.833-.303 9.182 3.965 6.238-.278 1.827-1.227 3.159-2.191 3.733v.59h6v-.59c-.964-.574-1.913-1.906-2.191-3.733 4.268 2.944 9.122-2.405 3.965-6.238">'),ge=(e={})=>(()=>{const t=c(he);return S(t,e,!0,!0),u(),t})(),pe=i("<header class=not-selectable><h1><!$><!/> Upgrade</h1><!$><!/>"),fe=()=>(()=>{const e=c(pe),t=e.firstChild,r=t.firstChild,[n,s]=y(r.nextSibling);n.nextSibling;const l=t.nextSibling,[o,a]=y(l.nextSibling);return m(t,ge,n,s),m(e,d(ue,{}),o,a),e})(),{room:b}=V(),ve=F();function _e(){b.isHost&&$e(),we()}function $e(){b.peer.on("open",e=>{console.log(`opened room: ${e}`)}),b.peer.on("connection",e=>{const t=e.peer;console.log(`connected to player: ${t}`),e.on("close",()=>{console.log(`disconnected from player: ${t}`)}),e.on("data",r=>{console.log(`message from player: ${t}`),console.table(r)})})}function we(){const e=b.id,t=ve().connect(e);t.on("open",()=>{console.log(`connected to room: ${e}`),t.send({nickname:localStorage.getItem("nickname"),avatarSeed:localStorage.getItem("avatarSeed")})})}const ye=i("<main>");function be(){const{EntryLayout:e,isEnteringRoom:t}=Z();return w(R(t,_e,{defer:!0})),d(N,{components:[j,T],get children(){return[d(fe,{}),(()=>{const r=c(ye);return m(r,d(e,{})),r})(),d(te,{})]}})}const Se=Object.freeze(Object.defineProperty({__proto__:null,default:be},Symbol.toStringTag,{value:"Module"})),Pe=[{configName:"onRenderClient",importPath:"/renderer/+onRenderClient.tsx",isValueFile:!0,exportValues:z},{configName:"Page",importPath:"/pages/index/+Page.tsx",isValueFile:!0,exportValues:Se}],Ce={onBeforeRenderEnv:{definedAt:{isComputed:!0},valueSerialized:"null"}};export{Pe as configValuesImported,Ce as configValuesSerialized};
function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = []
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}