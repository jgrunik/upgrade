{"version":3,"mappings":"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","names":["createContextProvider","value","callbacks","Context","createContext","Provider","props","context","onInit","onMount","onCleanup","onCleanUp","_$createComponent","children","use","useContext","undefined","Error","createPersistance","pairs","key","_createPersistance","createMemo","on","localPlayer","setLocalPlayer","createStore","LocalPlayerProvider","useLocalPlayer","AvatarSelector","avatarSrc","avatarSeed","_el$","_$getNextElement","_tmpl$2","_$spread","_$mergeProps","height","randomiseAvatar","_$insert","Show","when","_el$2","_tmpl$","style","setProperty","_$effect","_$setAttribute","_$runHydrationEvents","window","crypto","randomUUID","_Peer","setPeer","createSignal","PeerJSProvider","usePeerJS","Peer","createPeer","__vitePreload","then","PeerJS","default","args","onPlayerInitialise","connection","data","playerId","nickname","room","setRoom","useRoom","players","player","onMessage","message","DataEventHandlers","RoomProvider","params_roomId","URLSearchParams","document","location","search","get","id","isHost","joinRoom","peer","roomId","error","console","warn","destroy","log","roomConnection","connect","messageType","payload","cause","loadingDotsSVG","EnterRoomButton","loading","innerHTML","_$memo","NicknameInput","event","target","useHostRoom","hostRoom","setHostRoom","createHostRoom","roomPlayer","EntryScene","UI","setUI","useUI","isPendingEntry","setIsPendingEntry","name","defer","createEffect","type","show","level","alert","enterRoom","firstChild","_el$3","_co$","_$getNextMarker","nextSibling","_el$4","_el$5","_co$2","disabled","onclick","GameLayout","LobbyLayout","history","pushState","colorSchemes_matchMedia","colorSchemes","colorSchemeOptions","scenes","Entry","Lobby","LobbyScene","Game","GameScene","colorScheme","isDark","setting","toggleSetting","toggleColorSchemeSetting","scene","component","documentElement","classList","add","remove","isSystemDark","colorSchemeSetting","localStorage","getItem","matchMedia","addEventListener","matches","new_idx","indexOf","length","AlertModal","dialogRef","showModal","close","_el$6","_$use","$$click","_$setProperty","_$className","_$delegateEvents","Compose","components","reduceRight","ComponentStack","Component","game","setGame","GameProvider","useGame","contexts","UIProvider","Footer","systemIcon","darkIcon","lightIcon","IconList","system","dark","light","ColorSchemeButton","icon","_$addEventListener","spadeSVG","Header","_el$7","LandingPage"],"sources":["../../../../utils/createContextProvider.tsx","../../../../utils/createPersistance.ts","../../../../contexts/player.local.ts","../../../../components/AvatarSelector.tsx","../../../../contexts/peer.tsx","../../../../data-events/onPlayerInitialise.ts","../../../../data-events/onMessage.ts","../../../../utils/DataEventHandlers.ts","../../../../contexts/room.tsx","../../../../icons/loading-dots.svg?component-solid","../../../../components/EnterRoomButton.tsx","../../../../components/NicknameInput.tsx","../../../../contexts/room.host.tsx","../../../../scenes/EntryScene.tsx","../../../../scenes/GameScene.tsx","../../../../scenes/LobbyScene.tsx","../../../../contexts/ui.tsx","../../../../components/AlertModal.tsx","../../../../utils/Compose.tsx","../../../../contexts/game.tsx","../../../../utils/contexts.ts","../../../../pages/index/Footer.tsx","../../../../icons/computer-desktop.svg?component-solid","../../../../icons/moon.svg?component-solid","../../../../icons/sun.svg?component-solid","../../../../components/ColorSchemeButton.tsx","../../../../icons/spade.svg?component-solid","../../../../pages/index/Header.tsx","../../../../pages/index/+Page.tsx"],"sourcesContent":["import {\n  ParentProps,\n  createContext,\n  onCleanup,\n  onMount,\n  useContext,\n} from \"solid-js\";\n\nexport function createContextProvider<T, Context = any>(\n  value: T,\n  callbacks: {\n    onInit?: (props: ParentProps) => Context;\n    onMount?: (context?: Context) => Context;\n    onCleanUp?: (context?: Context) => void;\n  } = {}\n) {\n  const Context = createContext(value);\n\n  function Provider(props: ParentProps) {\n    let context = callbacks.onInit?.(props);\n    onMount(() => {\n      context = callbacks.onMount?.(context);\n    });\n    onCleanup(() => callbacks.onCleanUp?.(context));\n    return <Context.Provider value={value}>{props.children}</Context.Provider>;\n  }\n\n  function use() {\n    const value = useContext(Context);\n    if (value === undefined) {\n      throw new Error(`use() must be used within a Context.Provider`);\n    }\n    return value;\n  }\n\n  return { Provider, use };\n}\n","import { Accessor, createMemo, on } from \"solid-js\";\n\n/** updates localStorage with supplied values each time they change */\nexport default function createPersistance<T extends string>(\n  ...pairs: [string, Accessor<T | undefined>][]\n) {\n  pairs?.forEach(([key, value]) => _createPersistance(key, value));\n}\n\nfunction _createPersistance<T extends string>(\n  key: string,\n  value: Accessor<T | undefined>\n) {\n  createMemo(\n    on(value, () => localStorage.setItem(key, value()!), { defer: true })\n  );\n}\n","export { LocalPlayerProvider, useLocalPlayer, type LocalPlayer };\n\nimport { createStore } from \"solid-js/store\";\nimport { Player } from \"./player\";\nimport { createContextProvider } from \"../utils/createContextProvider\";\nimport createPersistance from \"../utils/createPersistance\";\n\ntype LocalPlayer = Player & {\n  /** The local player's network object */\n  // peer?: Peer;\n};\n\nconst [localPlayer, setLocalPlayer] = createStore<LocalPlayer>();\n\nconst { Provider: LocalPlayerProvider, use: useLocalPlayer } =\n  createContextProvider(\n    { localPlayer, setLocalPlayer },\n    {\n      onInit() {\n        createPersistance(\n          [\"playerId\", () => localPlayer.id],\n          [\"nickname\", () => localPlayer.nickname],\n          [\"avatarSeed\", () => localPlayer.avatarSeed]\n        );\n      },\n\n      onMount() {\n        setLocalPlayer({\n          id: localStorage.getItem(\"playerId\") ?? window.crypto.randomUUID(),\n          nickname: localStorage.getItem(\"nickname\") ?? \"\",\n          avatarSeed:\n            localStorage.getItem(\"avatarSeed\") ?? window.crypto.randomUUID(),\n        });\n      },\n\n      onCleanUp() {},\n    }\n  );\n","import { useLocalPlayer } from \"../contexts/player.local\";\nimport { JSX, Show, createMemo } from \"solid-js\";\n\nconst { localPlayer, setLocalPlayer } = useLocalPlayer();\n\nexport default function AvatarSelector(\n  props: JSX.ButtonHTMLAttributes<HTMLButtonElement>\n) {\n  const avatarSrc = createMemo(() => {\n    if (!localPlayer?.avatarSeed) return;\n    return `https://api.dicebear.com/7.x/lorelei/svg?seed=${localPlayer.avatarSeed!}`;\n  });\n\n  return (\n    <button\n      {...props}\n      id=\"avatar_selector_button\"\n      class=\"container border-3 border-dashed shadow shadow-small\"\n      style={{\n        \"font-size\": \"x-large\",\n        \"max-width\": \"28ch\",\n        \"aspect-ratio\": 1,\n        height: \"auto\",\n      }}\n      onClick={randomiseAvatar}\n    >\n      <Show when={avatarSrc()}>\n        <img\n          alt=\"avatar\"\n          draggable=\"false\"\n          style={{\n            margin: 0,\n            border: 0,\n          }}\n          src={avatarSrc()}\n        />\n      </Show>\n    </button>\n  );\n}\n\nfunction randomiseAvatar() {\n  setLocalPlayer(\"avatarSeed\", window.crypto.randomUUID());\n}\n","export { PeerJSProvider, usePeerJS, createPeer };\nimport { type Peer } from \"peerjs\";\nimport { createSignal } from \"solid-js\";\nimport { createContextProvider } from \"../utils/createContextProvider\";\n\nconst [_Peer, setPeer] = createSignal<typeof Peer>();\n\nconst { Provider: PeerJSProvider, use: usePeerJS } = createContextProvider(\n  { Peer: _Peer, createPeer },\n  {\n    onMount: () =>\n      import(\"peerjs\").then((PeerJS) => setPeer(() => PeerJS.default)),\n  }\n);\n\nfunction createPeer(...args: ConstructorParameters<typeof Peer>) {\n  const Peer = _Peer();\n  if (!Peer) throw new Error(\"Peer used before ready\");\n  return new Peer(...args);\n}\n","import { DataConnection } from \"peerjs\";\nimport { useRoom } from \"../contexts/room\";\n\nexport default (\n  connection: DataConnection,\n  data: { nickname: string; avatarSeed: string }\n) => {\n  const { peer: playerId } = connection;\n  const { nickname, avatarSeed } = data;\n  const { room, setRoom } = useRoom();\n\n  console.log(\"Initialising player\", { playerId, ...data });\n\n  setRoom(\"players\", (players) =>\n    players.map((player) => {\n      if (player.id !== playerId) return player;\n      return { ...player, nickname, avatarSeed };\n    })\n  );\n\n  console.table(room.players);\n};\n","import { DataConnection } from \"peerjs\";\n\nexport default (connection: DataConnection, data: { message: string }) => {\n  const { message } = data;\n  console.log(`Message from {${connection.peer}}:`, `\"${message}\"`);\n};\n","import { DataConnection } from \"peerjs\";\nimport onPlayerInitialise from \"../data-events/onPlayerInitialise\";\nimport onMessage from \"../data-events/onMessage\";\n\nexport type DataEventHandler<Payload> = (\n  connection: DataConnection,\n  data: Payload\n) => void;\n\nexport type DataEventType = keyof typeof DataEventHandlers;\n\nconst DataEventHandlers = {\n  PLAYER_INITIALISE: onPlayerInitialise,\n  MESSAGE: onMessage,\n};\n\nexport default DataEventHandlers;\n","export { Room, RoomProvider, joinRoom, useRoom };\n\nimport { DataConnection } from \"peerjs\";\nimport { createStore } from \"solid-js/store\";\nimport { usePeerJS } from \"../contexts/peer\";\nimport { useLocalPlayer } from \"../contexts/player.local\";\nimport DataEventHandlers, { DataEventType } from \"../utils/DataEventHandlers\";\nimport { createContextProvider } from \"../utils/createContextProvider\";\nimport { AnyError } from \"../utils/errors\";\nimport { Player } from \"./player\";\n\ntype Room = {\n  /** The id of the room */\n  id?: string;\n  /** Is the local player hosting the room? */\n  isHost?: boolean;\n  /** The player hosting the room */\n  hostPlayer?: Player;\n  /** The players currently connected to the room */\n  players: Player[];\n  /** The network connection from the local player to the room */\n  connection?: DataConnection;\n  /** Any error with the room */\n  error?: AnyError;\n};\n\nconst [room, setRoom] = createStore<Room>({ players: [] });\n\nconst { Provider: RoomProvider, use: useRoom } = createContextProvider(\n  { room, setRoom },\n  {\n    onInit() {},\n\n    onMount() {\n      const params = new URLSearchParams(document.location.search);\n      const params_roomId = params.get(\"room\");\n\n      setRoom({\n        id: params_roomId ?? undefined,\n        isHost: params_roomId === null,\n      });\n    },\n\n    onCleanUp() {},\n  }\n);\n\nfunction joinRoom() {\n  const { room, setRoom } = useRoom();\n  const { createPeer } = usePeerJS();\n\n  const { localPlayer } = useLocalPlayer();\n  const peer = createPeer(localPlayer.id!);\n  const roomId = room.id!;\n\n  peer\n    .on(\"error\", (error) => {\n      console.warn({ roomId, error });\n      setRoom(\"error\", error);\n      peer.destroy();\n    })\n    .on(\"open\", () => {\n      console.log(\"Connecting to room\", { roomId });\n      const roomConnection = peer.connect(roomId);\n\n      roomConnection\n        .on(\"open\", () => {\n          console.log(\"Connected to room\", { roomId });\n          setRoom(\"connection\", roomConnection);\n        })\n\n        .on(\"close\", () => {\n          console.log(\"Disconnected from room\", { roomId });\n        })\n\n        .on(\"error\", (error) => {\n          console.warn(\"Local Player Room error\", { roomId, error });\n          setRoom(\"error\", error);\n        })\n\n        .on(\"data\", (data) => {\n          console.log(`Data from room`, { roomId, data });\n          // console.table(data);\n\n          const { messageType, payload } = data as any;\n\n          if (messageType === undefined) {\n            const error = new Error(\"Malformed data from room\", {\n              cause: { roomId, data },\n            });\n            console.warn(error);\n            setRoom(\"error\", error);\n            return;\n          }\n\n          DataEventHandlers[messageType as DataEventType](\n            roomConnection,\n            payload\n          );\n        });\n    });\n}\n","export default (props = {}) => <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\"{...props}><style>@keyframes spinner_xe7Q{'{'}93.75%,to{'{'}r:3px{'}'}46.875%{'{'}r:.2px{'}'}{'}'}.spinner_b2T7{'{'}animation:spinner_xe7Q .8s linear infinite{'}'}</style><circle cx=\"4\" cy=\"12\" r=\"3\" class=\"spinner_b2T7\"/><circle cx=\"12\" cy=\"12\" r=\"3\" class=\"spinner_b2T7\" style=\"animation-delay:-.65s\"/><circle cx=\"20\" cy=\"12\" r=\"3\" class=\"spinner_b2T7\" style=\"animation-delay:-.5s\"/></svg>","import { useRoom } from \"../contexts/room\";\nimport { Accessor, JSX, createMemo } from \"solid-js\";\nimport loadingDotsSVG from \"../icons/loading-dots.svg?component-solid\";\n\nconst { room } = useRoom();\n\ntype EnterRoomButtonProps = JSX.ButtonHTMLAttributes<HTMLButtonElement> & {\n  loading: Accessor<boolean>;\n};\n\nexport default function EnterRoomButton(props: EnterRoomButtonProps) {\n  const { loading = () => true } = props;\n\n  const innerHTML = createMemo(() => (\n    <>\n      {loading() ? loadingDotsSVG : `âš” ${room?.isHost ? \"Host\" : \"Join\"} Room`}\n    </>\n  ));\n\n  return (\n    <button\n      {...props}\n      id=\"enter_room_button\"\n      class=\"btn-secondary-outline\"\n      style=\"fill:var(--secondary); min-width: 11ch; max-width: fit-content; font-size: xx-large; font-variant: small-caps\"\n    >\n      {innerHTML()}\n    </button>\n  );\n}\n","import { useLocalPlayer } from \"../contexts/player.local\";\nimport { JSX } from \"solid-js\";\n\nexport default function NicknameInput(\n  props: JSX.InputHTMLAttributes<HTMLInputElement>\n) {\n  const { localPlayer, setLocalPlayer } = useLocalPlayer();\n\n  return (\n    <input\n      {...props}\n      id=\"nickname_name_input\"\n      type=\"text\"\n      placeholder=\"nickname goes here â™¥\"\n      class=\"container border-3 border-dashed shadow shadow-hover shadow-small\"\n      maxlength=\"24\"\n      style={{\n        \"text-align\": \"center\",\n        \"font-size\": \"x-large\",\n        \"max-width\": \"28ch\",\n      }}\n      value={localPlayer?.nickname}\n      onInput={(event) => setLocalPlayer(\"nickname\", event.target.value)}\n    />\n  );\n}\n","export { createHostRoom, useHostRoom, type HostRoom, type HostedPlayer };\n\nimport { DataConnection } from \"peerjs\";\nimport { type SetStoreFunction } from \"solid-js/store\";\nimport DataEventHandlers, { DataEventType } from \"../utils/DataEventHandlers\";\nimport { usePeerJS } from \"./peer\";\nimport { type Player } from \"./player\";\nimport { Room, useRoom } from \"./room\";\n\ntype HostRoom = Room & {\n  /** The local player is hosting the room */\n  isHost: true;\n  /** The players currently connected to the room */\n  players: HostedPlayer[];\n};\n\ntype HostedPlayer = Player & {\n  /** The connection to remote player */\n  connection?: DataConnection;\n};\n\nconst useHostRoom = () => {\n  const { room: hostRoom, setRoom: setHostRoom } = useRoom() as {\n    room: HostRoom;\n    setRoom: SetStoreFunction<HostRoom>;\n  };\n  return { hostRoom, setHostRoom };\n};\n\nfunction createHostRoom() {\n  console.log(\"Creating Host Room\");\n  const { hostRoom, setHostRoom } = useHostRoom();\n  const { createPeer } = usePeerJS();\n  const peer = createPeer(hostRoom.id!);\n\n  peer\n    .on(\"error\", (error) => {\n      console.warn(\"Host Room Peer error\", { error });\n      peer.destroy();\n    })\n\n    .on(\"open\", (roomId) => {\n      console.log(\"Room opened\", { roomId });\n      setHostRoom(\"id\", roomId);\n    })\n\n    .on(\"connection\", (connection) => {\n      const playerId = connection.peer;\n      console.log(\"Player connecting\", { playerId });\n\n      connection\n        .on(\"open\", () => {\n          console.log(\"Player connected\", { playerId });\n\n          // add player to list\n          const roomPlayer: HostedPlayer = { id: playerId, connection };\n          setHostRoom(\"players\", (players) => [...players, roomPlayer]);\n        })\n\n        .on(\"close\", () => {\n          console.log(\"Player disconnected\", { playerId });\n        })\n\n        .on(\"error\", (error) =>\n          console.warn(\"Player connection error\", { playerId, error })\n        )\n\n        .on(\"data\", (data: any) => {\n          const { messageType, payload } = data;\n\n          if (messageType === undefined) {\n            console.warn(\"Malformed data from player\", { playerId, data });\n            return;\n          }\n\n          DataEventHandlers[messageType as DataEventType](connection, payload);\n        });\n    });\n\n  return { hostRoom, setHostRoom };\n}\n","import { createEffect, createMemo, createSignal, on } from \"solid-js\";\nimport AvatarSelector from \"../components/AvatarSelector\";\nimport EnterRoomButton from \"../components/EnterRoomButton\";\nimport NicknameInput from \"../components/NicknameInput\";\nimport { useLocalPlayer } from \"../contexts/player.local\";\nimport { joinRoom, useRoom } from \"../contexts/room\";\nimport { createHostRoom } from \"../contexts/room.host\";\nimport { useUI } from \"../contexts/ui\";\nimport \"./EntryScene.css\";\n\nexport default function EntryScene() {\n  const { localPlayer } = useLocalPlayer();\n  const { room } = useRoom();\n  const { UI, setUI } = useUI();\n  const [isPendingEntry, setIsPendingEntry] = createSignal(false);\n\n  // when room is connected,\n  // transition to Lobby\n  createMemo(\n    on(\n      () => room.connection,\n      () => setUI(\"scene\", { name: \"Lobby\" }),\n      { defer: true }\n    )\n  );\n\n  // when host room is ready,\n  // join as host player\n  createEffect(\n    on(\n      () => room.id,\n      () => {\n        if (room.isHost) joinRoom();\n      },\n      { defer: true }\n    )\n  );\n\n  // when a room error occurs,\n  // show alert modal\n  createEffect(\n    on(\n      () => room.error!,\n      (error) => {\n        switch (error.type ?? error.name) {\n          case \"peer-unavailable\": {\n            setUI(\"alert\", {\n              show: true,\n              level: \"alert-warning\",\n              innerHTML: \"Could not connect to room ðŸ¤”\",\n            });\n            break;\n          }\n          default: {\n            setUI(\"alert\", {\n              show: true,\n              level: \"alert-danger\",\n              innerHTML: error.message,\n            });\n          }\n        }\n      },\n      { defer: true }\n    )\n  );\n\n  // when alert modal closes,\n  // re-enable inputs\n  createEffect(() => {\n    if (!UI.alert.show) setIsPendingEntry(false);\n  });\n\n  function enterRoom() {\n    setIsPendingEntry(true);\n    const { room } = useRoom();\n    if (room.isHost) {\n      createHostRoom(); // local player will autojoin when host room is ready\n    } else {\n      joinRoom();\n    }\n  }\n\n  return (\n    <>\n      <section>\n        <AvatarSelector disabled={isPendingEntry()} />\n        <NicknameInput disabled={isPendingEntry()} />\n      </section>\n      <EnterRoomButton\n        disabled={!localPlayer?.nickname || isPendingEntry()}\n        onclick={enterRoom}\n        loading={isPendingEntry}\n      />\n    </>\n  );\n}\n","export default function GameLayout() {\n  return <>Game Layout</>;\n}\n","import { createEffect, onMount } from \"solid-js\";\nimport { useRoom } from \"../contexts/room\";\n\nexport default function LobbyLayout() {\n  const { room } = useRoom();\n  onMount(() => {\n    const params = new URLSearchParams(document.location.search);\n    const params_roomId = params.get(\"room\");\n    if (params_roomId == null) history.pushState({}, \"\", `?room=${room.id!}`);\n  });\n\n  return <>Lobby Layout</>;\n}\n","export { ColorScheme, ColorSchemeOption, Provider as UIProvider, use as useUI };\n\nimport { JSX, ParentProps, createEffect, on } from \"solid-js\";\nimport { createStore } from \"solid-js/store\";\nimport EntryScene from \"../scenes/EntryScene\";\nimport GameScene from \"../scenes/GameScene\";\nimport LobbyScene from \"../scenes/LobbyScene\";\nimport { createContextProvider } from \"../utils/createContextProvider\";\nimport createPersistance from \"../utils/createPersistance\";\n\nconst colorSchemes_matchMedia = [\"light\", \"dark\"] as const;\nconst colorSchemes = colorSchemes_matchMedia;\ntype ColorScheme = (typeof colorSchemes)[number];\nconst colorSchemeOptions = [\"system\", ...colorSchemes] as const;\ntype ColorSchemeOption = (typeof colorSchemeOptions)[number];\n\nconst scenes = {\n  Entry: EntryScene,\n  Lobby: LobbyScene,\n  Game: GameScene,\n};\n\ntype UIState = {\n  colorScheme: {\n    isDark: boolean;\n    setting: ColorSchemeOption;\n    toggleSetting: () => void;\n  };\n  scene: {\n    name: keyof typeof scenes;\n    component: (typeof scenes)[keyof typeof scenes];\n  };\n  alert: {\n    show: boolean;\n    level:\n      | \"alert-primary\"\n      | \"alert-secondary\"\n      | \"alert-success\"\n      | \"alert-warning\"\n      | \"alert-danger\";\n    innerHTML?: JSX.Element;\n    dialogRef?: HTMLDialogElement;\n  };\n};\n\nconst [UI, setUI] = createStore<UIState>({\n  colorScheme: {\n    isDark: false,\n    setting: \"system\",\n    toggleSetting: toggleColorSchemeSetting,\n  },\n  scene: { name: \"Entry\", component: EntryScene },\n  alert: {\n    show: false,\n    level: \"alert-warning\",\n    innerHTML: \"Hello, world!\",\n  },\n});\n\nconst { Provider, use } = createContextProvider(\n  { UI, setUI },\n  {\n    onInit() {\n      createPersistance([\"colorSchemeSetting\", () => UI.colorScheme.setting]);\n\n      // apply dark mode class on the html element\n      createEffect(\n        on(\n          () => UI.colorScheme.isDark,\n          () => {\n            UI.colorScheme.isDark\n              ? document.documentElement.classList.add(\"dark\")\n              : document.documentElement.classList.remove(\"dark\");\n          },\n          { defer: false }\n        )\n      );\n\n      // set isDark based on setting\n      createEffect(() => {\n        setUI(\n          \"colorScheme\",\n          \"isDark\",\n          UI.colorScheme.setting !== \"system\"\n            ? UI.colorScheme.setting === \"dark\"\n            : isSystemDark() ?? UI.colorScheme.isDark\n        );\n      });\n\n      // when scene name changes\n      // update component to match\n      createEffect(\n        on(\n          () => UI.scene.name,\n          () => setUI(\"scene\", { component: scenes[UI.scene.name] }),\n          { defer: true }\n        )\n      );\n    },\n\n    onMount() {\n      const colorSchemeSetting =\n        (localStorage.getItem(\"colorSchemeSetting\") as ColorSchemeOption) ??\n        UI.colorScheme.setting;\n\n      setUI(\"colorScheme\", \"setting\", colorSchemeSetting);\n\n      window\n        .matchMedia(\"(prefers-color-scheme: dark)\")\n        .addEventListener(\"change\", ({ matches: isDark }) => {\n          if (UI.colorScheme.setting !== \"system\") return;\n          setUI(\"colorScheme\", { isDark });\n        });\n    },\n\n    onCleanUp() {},\n  }\n);\n\nfunction isSystemDark(): boolean | undefined {\n  if (window.matchMedia === undefined) return;\n  return window.matchMedia(`(prefers-color-scheme: dark)`).matches;\n}\n\nfunction toggleColorSchemeSetting() {\n  const current_idx = colorSchemeOptions.indexOf(UI.colorScheme.setting);\n  const new_idx = (current_idx + 1) % colorSchemeOptions.length;\n  setUI(\"colorScheme\", \"setting\", colorSchemeOptions[new_idx]);\n}\n","import { createEffect, on } from \"solid-js\";\nimport { useUI } from \"../contexts/ui\";\nimport \"./AlertModal.css\";\n\nexport default () => {\n  const { UI, setUI } = useUI();\n\n  createEffect(\n    on(\n      () => UI.alert.show,\n      () => {\n        if (UI.alert.show) {\n          UI.alert.dialogRef?.showModal();\n        } else {\n          UI.alert.dialogRef?.close();\n        }\n      },\n      { defer: true }\n    )\n  );\n\n  createEffect(() =>\n    UI.alert.dialogRef!.addEventListener(\"close\", () =>\n      setUI(\"alert\", { show: false })\n    )\n  );\n\n  return (\n    <dialog ref={(dialogRef) => setUI(\"alert\", { dialogRef })}>\n      <input id=\"alertModal\" class=\"alert-state\" type=\"checkbox\" />\n      <div class={\"alert  \" + UI.alert.level}>\n        {UI.alert.innerHTML}\n        <label\n          class=\"btn-close\"\n          for=\"alertModal\"\n          onclick={() => UI.alert.dialogRef?.close()}\n          innerText=\"X\"\n        />\n      </div>\n    </dialog>\n  );\n};\n","import { Component, ParentProps } from \"solid-js\";\nimport { JSX } from \"solid-js/jsx-runtime\";\n\ntype ComposeProps = ParentProps & { components: Component<any>[] };\n\nexport default function Compose(props: ComposeProps): JSX.Element {\n  const { components = [], children } = props;\n\n  return (\n    <>\n      {components.reduceRight(\n        (ComponentStack, Component) => (\n          <Component>{ComponentStack}</Component>\n        ),\n        children\n      )}\n    </>\n  );\n}\n","export { Game, GameProvider, useGame };\nimport { createStore } from \"solid-js/store\";\nimport { createContextProvider } from \"../utils/createContextProvider\";\n\ntype Player = {};\ntype Pile = {\n  cards: Card[];\n  draw?: (amount: number) => Card[];\n  add?: (...cards: Card[]) => void;\n  shuffle?: () => {};\n};\n\ntype Suit = \"â™ \" | \"â™¥\" | \"â™¦\" | \"â™£\";\ntype Rank =\n  | \"2\"\n  | \"3\"\n  | \"4\"\n  | \"5\"\n  | \"6\"\n  | \"7\"\n  | \"8\"\n  | \"9\"\n  | \"10\"\n  | \"J\"\n  | \"Q\"\n  | \"K\"\n  | \"A\";\n\ntype Card = { suit: Suit; rank: Rank };\n\ntype Game = {\n  players?: Player[];\n  currentPlayerIndex?: number;\n  piles?: {\n    deck: Pile;\n    [pile: string]: Pile;\n  };\n};\n\nconst [game, setGame] = createStore<Game>({});\n\nconst { Provider: GameProvider, use: useGame } = createContextProvider(\n  { game, setGame },\n  {\n    onInit() {\n      // console.log(\"[Game Context] Initialising\");\n    },\n\n    onMount() {\n      // console.log(\"[Game Context] Mounted\");\n    },\n\n    onCleanUp() {\n      // console.log(\"[Game Context] Cleaning\");\n    },\n  }\n);\n","import { GameProvider } from \"../contexts/game\";\nimport { LocalPlayerProvider } from \"../contexts/player.local\";\nimport { PeerJSProvider } from \"../contexts/peer\";\nimport { RoomProvider } from \"../contexts/room\";\nimport { UIProvider } from \"../contexts/ui\";\n\nexport default [\n  GameProvider,\n  LocalPlayerProvider,\n  PeerJSProvider,\n  RoomProvider,\n  UIProvider,\n];\n","import \"./Footer.module.css\";\n\nexport default () => (\n  <footer>\n    <p\n      // @ts-expect-error\n      xmlns:cc=\"http://creativecommons.org/ns#\"\n      xmlns:dct=\"http://purl.org/dc/terms/\"\n    >\n      <a\n        rel=\"cc:attributionURL\"\n        property=\"dct:title\"\n        href=\"https://github.com/jgrunik/upgrade\"\n      >\n        Upgrade\n      </a>\n      &nbsp;by&nbsp;\n      <a\n        rel=\"cc:attributionURL dct:creator\"\n        property=\"cc:attributionName\"\n        href=\"https://github.com/jgrunik\"\n      >\n        Joshua Grunik\n      </a>\n      &nbsp;is licensed under&nbsp;\n      <a\n        rel=\"license noopener noreferrer\"\n        href=\"http://creativecommons.org/licenses/by-nc-sa/4.0/\"\n        target=\"_blank\"\n      >\n        CC BY-NC-SA 4.0\n      </a>\n      <br />\n      <span style=\"display: inline-flex; height: 2ch\">\n        <img src=\"https://mirrors.creativecommons.org/presskit/icons/cc.svg\" />\n        <img src=\"https://mirrors.creativecommons.org/presskit/icons/by.svg\" />\n        <img src=\"https://mirrors.creativecommons.org/presskit/icons/nc.svg\" />\n        <img src=\"https://mirrors.creativecommons.org/presskit/icons/sa.svg\" />\n      </span>\n    </p>\n  </footer>\n);\n","export default (props = {}) => <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"1em\" height=\"1em\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"0\" style=\"overflow:visible;color:currentcolor\" viewBox=\"0 0 24 24\"{...props}><path fill=\"currentColor\" fill-rule=\"evenodd\" stroke=\"none\" d=\"M2.25 5.25a3 3 0 0 1 3-3h13.5a3 3 0 0 1 3 3V15a3 3 0 0 1-3 3h-3v.257c0 .597.237 1.17.659 1.591l.621.622a.75.75 0 0 1-.53 1.28h-9a.75.75 0 0 1-.53-1.28l.621-.622a2.25 2.25 0 0 0 .659-1.59V18h-3a3 3 0 0 1-3-3zm1.5 0v7.5a1.5 1.5 0 0 0 1.5 1.5h13.5a1.5 1.5 0 0 0 1.5-1.5v-7.5a1.5 1.5 0 0 0-1.5-1.5H5.25a1.5 1.5 0 0 0-1.5 1.5\" clip-rule=\"evenodd\"/></svg>","export default (props = {}) => <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"1em\" height=\"1em\" fill=\"currentColor\" stroke-width=\"0\" style=\"overflow:visible;color:currentcolor\" viewBox=\"0 0 16 16\"{...props}><path d=\"M6 .278a.768.768 0 0 1 .08.858 7.208 7.208 0 0 0-.878 3.46c0 4.021 3.278 7.277 7.318 7.277.527 0 1.04-.055 1.533-.16a.787.787 0 0 1 .81.316.733.733 0 0 1-.031.893A8.349 8.349 0 0 1 8.344 16C3.734 16 0 12.286 0 7.71 0 4.266 2.114 1.312 5.124.06A.752.752 0 0 1 6 .278\"/><path d=\"M10.794 3.148a.217.217 0 0 1 .412 0l.387 1.162c.173.518.579.924 1.097 1.097l1.162.387a.217.217 0 0 1 0 .412l-1.162.387a1.734 1.734 0 0 0-1.097 1.097l-.387 1.162a.217.217 0 0 1-.412 0l-.387-1.162A1.734 1.734 0 0 0 9.31 6.593l-1.162-.387a.217.217 0 0 1 0-.412l1.162-.387a1.734 1.734 0 0 0 1.097-1.097zM13.863.099a.145.145 0 0 1 .274 0l.258.774c.115.346.386.617.732.732l.774.258a.145.145 0 0 1 0 .274l-.774.258a1.156 1.156 0 0 0-.732.732l-.258.774a.145.145 0 0 1-.274 0l-.258-.774a1.156 1.156 0 0 0-.732-.732l-.774-.258a.145.145 0 0 1 0-.274l.774-.258c.346-.115.617-.386.732-.732z\"/></svg>","export default (props = {}) => <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"1em\" height=\"1em\" fill=\"currentColor\" stroke-width=\"0\" style=\"overflow:visible;color:currentcolor\" viewBox=\"0 0 16 16\"{...props}><path d=\"M8 12a4 4 0 1 0 0-8 4 4 0 0 0 0 8M8 0a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-1 0v-2A.5.5 0 0 1 8 0m0 13a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-1 0v-2A.5.5 0 0 1 8 13m8-5a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1 0-1h2a.5.5 0 0 1 .5.5M3 8a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1 0-1h2A.5.5 0 0 1 3 8m10.657-5.657a.5.5 0 0 1 0 .707l-1.414 1.415a.5.5 0 1 1-.707-.708l1.414-1.414a.5.5 0 0 1 .707 0m-9.193 9.193a.5.5 0 0 1 0 .707L3.05 13.657a.5.5 0 0 1-.707-.707l1.414-1.414a.5.5 0 0 1 .707 0m9.193 2.121a.5.5 0 0 1-.707 0l-1.414-1.414a.5.5 0 0 1 .707-.707l1.414 1.414a.5.5 0 0 1 0 .707M4.464 4.465a.5.5 0 0 1-.707 0L2.343 3.05a.5.5 0 1 1 .707-.707l1.414 1.414a.5.5 0 0 1 0 .708\"/></svg>","import { createMemo } from \"solid-js\";\nimport { useUI } from \"../contexts/ui\";\nimport systemIcon from \"../icons/computer-desktop.svg?component-solid\";\nimport darkIcon from \"../icons/moon.svg?component-solid\";\nimport lightIcon from \"../icons/sun.svg?component-solid\";\n\nconst IconList = {\n  system: systemIcon,\n  dark: darkIcon,\n  light: lightIcon,\n} as const;\n\nexport default function ColorSchemeButton() {\n  const { UI } = useUI();\n\n  const icon = createMemo(() => IconList[UI.colorScheme.setting]);\n\n  return (\n    <button\n      class=\"card border\"\n      style=\"margin-right: 0; margin: 0; padding: 0.5rem\"\n      popover-left={`color scheme '${UI.colorScheme.setting}'`}\n      onClick={UI.colorScheme.toggleSetting}\n    >\n      {\n        // @ts-expect-error\n        icon()\n      }\n    </button>\n  );\n}\n","export default (props = {}) => <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"1em\" height=\"1em\" fill=\"currentColor\" stroke-width=\"0\" style=\"overflow:visible;color:currentcolor\" viewBox=\"0 0 16 16\"{...props}><path d=\"M12.775 5.44C9.751 3.192 8.708 1.393 8.001 0c-.708 1.393-1.75 3.192-4.774 5.44-5.157 3.833-.303 9.182 3.965 6.238-.278 1.827-1.227 3.159-2.191 3.733v.59h6v-.59c-.964-.574-1.913-1.906-2.191-3.733 4.268 2.944 9.122-2.405 3.965-6.238\"/></svg>","import ColorSchemeButton from \"../../components/ColorSchemeButton\";\nimport spadeSVG from \"../../icons/spade.svg?component-solid\";\nimport \"./Header.module.css\";\n\nexport default () => (\n  <header class=\"not-selectable\">\n    <h1>\n      {\n        //@ts-expect-error\n        spadeSVG\n      }{\" \"}\n      Upgrade\n    </h1>\n    <ColorSchemeButton />\n  </header>\n);\n","import AlertModal from \"../../components/AlertModal\";\nimport { useUI } from \"../../contexts/ui\";\nimport Compose from \"../../utils/Compose\";\nimport contexts from \"../../utils/contexts\";\nimport Footer from \"./Footer\";\nimport Header from \"./Header\";\nimport \"./Page.css\";\n\nconst { UI } = useUI();\n\nexport default function LandingPage() {\n  return (\n    <Compose components={contexts}>\n      <Header />\n      <main>{UI.scene.component()}</main>\n      <Footer />\n      <AlertModal />\n    </Compose>\n  );\n}\n"],"file":"assets/entries/pages_index.mhmA10GK.js"}