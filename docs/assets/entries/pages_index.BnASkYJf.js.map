{"version":3,"mappings":"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","names":["createContextProvider","value","callbacks","Context","createContext","Provider","props","context","onInit","onMount","onCleanup","onCleanUp","_$createComponent","children","use","useContext","undefined","Error","_Peer","setPeer","createSignal","PeerJSProvider","usePeerJS","Peer","createPeer","__vitePreload","then","PeerJS","default","args","onMessage","connection","data","message","room","setRoom","createStore","players","RoomProvider","useRoom","params_roomId","URLSearchParams","document","location","search","get","id","isHost","onPlayerInitialise","playerId","nickname","avatarSeed","player","DataEventHandlers","DataEvent","type","payload","createPersistance","pairs","key","_createPersistance","createMemo","on","localPlayer","setLocalPlayer","LocalPlayerProvider","useLocalPlayer","joinRoom","peer","roomId","error","roomConnection","AvatarSelector","avatarSrc","_el$","_$getNextElement","_tmpl$2","_$spread","_$mergeProps","height","randomiseAvatar","_$insert","Show","when","_el$2","_tmpl$","style","setProperty","_$effect","_$setAttribute","_$runHydrationEvents","window","crypto","randomUUID","loadingDotsSVG","EnterRoomButton","loading","innerHTML","_$memo","NicknameInput","event","target","useHostRoom","hostRoom","setHostRoom","createHostRoom","console","log","warn","destroy","roomPlayer","EntryScene","UI","setUI","useUI","isPendingEntry","setIsPendingEntry","name","defer","createEffect","show","level","alert","enterRoom","firstChild","_el$3","_co$","_$getNextMarker","nextSibling","_el$4","_el$5","_co$2","disabled","onclick","GameLayout","optionsSVG","LobbyLayout","history","pushState","_el$6","_el$7","_el$8","_el$10","_el$11","_el$12","_el$13","_el$14","_el$15","_co$3","length","Index","each","i","_el$16","colorSchemes_matchMedia","colorSchemes","colorSchemeOptions","scenes","Entry","Lobby","LobbyScene","Game","GameScene","colorScheme","isDark","setting","toggleSetting","toggleColorSchemeSetting","scene","component","documentElement","classList","add","remove","isSystemDark","colorSchemeSetting","localStorage","getItem","matchMedia","addEventListener","matches","new_idx","indexOf","AlertModal","dialogRef","showModal","close","_$use","$$click","_$setProperty","_$className","_$delegateEvents","Compose","components","reduceRight","ComponentStack","Component","game","setGame","GameProvider","useGame","contexts","UIProvider","Footer","systemIcon","darkIcon","lightIcon","IconList","system","dark","light","ColorSchemeButton","icon","_$addEventListener","spadeSVG","Header","LandingPage"],"sources":["../../../../utils/createContextProvider.tsx","../../../../contexts/peer.tsx","../../../../data-events/onMessage.ts","../../../../contexts/room.tsx","../../../../data-events/onPlayerInitialise.ts","../../../../utils/DataEvents.ts","../../../../utils/createPersistance.ts","../../../../contexts/player.local.ts","../../../../components/AvatarSelector.tsx","../../../../icons/loading-dots.svg?component-solid","../../../../components/EnterRoomButton.tsx","../../../../components/NicknameInput.tsx","../../../../contexts/room.host.tsx","../../../../scenes/EntryScene.tsx","../../../../scenes/GameScene.tsx","../../../../icons/options.svg?component-solid","../../../../scenes/LobbyScene.tsx","../../../../contexts/ui.tsx","../../../../components/AlertModal.tsx","../../../../utils/Compose.tsx","../../../../contexts/game.tsx","../../../../utils/contexts.ts","../../../../pages/index/Footer.tsx","../../../../icons/computer-desktop.svg?component-solid","../../../../icons/moon.svg?component-solid","../../../../icons/sun.svg?component-solid","../../../../components/ColorSchemeButton.tsx","../../../../icons/spade.svg?component-solid","../../../../pages/index/Header.tsx","../../../../pages/index/+Page.tsx"],"sourcesContent":["import {\n  ParentProps,\n  createContext,\n  onCleanup,\n  onMount,\n  useContext,\n} from \"solid-js\";\n\nexport function createContextProvider<T, Context = any>(\n  value: T,\n  callbacks: {\n    onInit?: (props: ParentProps) => Context;\n    onMount?: (context?: Context) => Context;\n    onCleanUp?: (context?: Context) => void;\n  } = {}\n) {\n  const Context = createContext(value);\n\n  function Provider(props: ParentProps) {\n    let context = callbacks.onInit?.(props);\n    onMount(() => {\n      context = callbacks.onMount?.(context);\n    });\n    onCleanup(() => callbacks.onCleanUp?.(context));\n    return <Context.Provider value={value}>{props.children}</Context.Provider>;\n  }\n\n  function use() {\n    const value = useContext(Context);\n    if (value === undefined) {\n      throw new Error(`use() must be used within a Context.Provider`);\n    }\n    return value;\n  }\n\n  return { Provider, use };\n}\n","export { PeerJSProvider, usePeerJS, createPeer };\nimport { type Peer } from \"peerjs\";\nimport { createSignal } from \"solid-js\";\nimport { createContextProvider } from \"../utils/createContextProvider\";\n\nconst [_Peer, setPeer] = createSignal<typeof Peer>();\n\nconst { Provider: PeerJSProvider, use: usePeerJS } = createContextProvider(\n  { Peer: _Peer, createPeer },\n  {\n    onMount: () =>\n      import(\"peerjs\").then((PeerJS) => setPeer(() => PeerJS.default)),\n  }\n);\n\nfunction createPeer(...args: ConstructorParameters<typeof Peer>) {\n  const Peer = _Peer();\n  if (!Peer) throw new Error(\"Peer used before ready\");\n  return new Peer(...args);\n}\n","import { DataConnection } from \"peerjs\";\n\nexport default {\n  MESSAGE: function onMessage(\n    connection: DataConnection,\n    data: { message: string }\n  ) {\n    const { message } = data;\n    console.log(`Message received.`, { id: connection.peer, message });\n  },\n};\n","export { Room, RoomProvider, useRoom };\n\nimport { DataConnection } from \"peerjs\";\nimport { createStore } from \"solid-js/store\";\nimport { createContextProvider } from \"../utils/createContextProvider\";\nimport { AnyError } from \"../utils/errors\";\nimport { Player } from \"./player\";\n\ntype Room = {\n  /** The id of the room */\n  id?: string;\n  /** Is the local player hosting the room? */\n  isHost?: boolean;\n  /** The player hosting the room */\n  hostPlayer?: Player;\n  /** The players currently connected to the room */\n  players: Player[];\n  /** The network connection from the local player to the room */\n  connection?: DataConnection;\n  /** Any error with the room */\n  error?: AnyError;\n};\n\nconst [room, setRoom] = createStore<Room>({ players: [] });\n\nconst { Provider: RoomProvider, use: useRoom } = createContextProvider(\n  { room, setRoom },\n  {\n    onInit() {},\n\n    onMount() {\n      const params = new URLSearchParams(document.location.search);\n      const params_roomId = params.get(\"room\");\n\n      setRoom({\n        id: params_roomId ?? undefined,\n        isHost: params_roomId === null,\n      });\n    },\n\n    onCleanUp() {},\n  }\n);\n","import { DataConnection } from \"peerjs\";\nimport { useRoom } from \"../contexts/room\";\n\ntype Payload = { nickname: string; avatarSeed: string };\n\nexport default {\n  PLAYER_INITIAL_INFO: (connection: DataConnection, data: Payload) => {\n    const { peer: playerId } = connection;\n    const { nickname, avatarSeed } = data;\n    const { room, setRoom } = useRoom();\n\n    console.log(\"Initialising player\", { playerId, ...data });\n\n    setRoom(\"players\", (players) =>\n      players.map((player) => {\n        if (player.id !== playerId) return player;\n        return { ...player, nickname, avatarSeed };\n      })\n    );\n\n    console.table({ id: playerId, ...data });\n  },\n};\n","export { DataEvent, DataEventHandlers, type DataEventType };\n\nimport onMessage from \"../data-events/onMessage\";\nimport onPlayerInitialise from \"../data-events/onPlayerInitialise\";\n\nconst DataEventHandlers = {\n  ...onMessage,\n  ...onPlayerInitialise,\n};\n\ntype DataEventType = keyof typeof DataEventHandlers;\n\ntype DataEventPayload<T extends DataEventType> = Parameters<\n  (typeof DataEventHandlers)[T]\n>[1];\n\nclass DataEvent<T extends DataEventType> {\n  constructor(type: T, payload: DataEventPayload<T>) {\n    return { type, payload };\n  }\n}\n","import { Accessor, createMemo, on } from \"solid-js\";\n\n/** updates localStorage with supplied values each time they change */\nexport default function createPersistance<T extends string>(\n  ...pairs: [string, Accessor<T | undefined>][]\n) {\n  pairs?.forEach(([key, value]) => _createPersistance(key, value));\n}\n\nfunction _createPersistance<T extends string>(\n  key: string,\n  value: Accessor<T | undefined>\n) {\n  createMemo(\n    on(value, () => localStorage.setItem(key, value()!), { defer: true })\n  );\n}\n","export { LocalPlayerProvider, joinRoom, useLocalPlayer, type LocalPlayer };\n\nimport { createStore } from \"solid-js/store\";\nimport { usePeerJS } from \"../contexts/peer\";\nimport {\n  DataEvent,\n  DataEventHandlers,\n  type DataEventType,\n} from \"../utils/DataEvents\";\nimport { createContextProvider } from \"../utils/createContextProvider\";\nimport createPersistance from \"../utils/createPersistance\";\nimport { Player } from \"./player\";\nimport { useRoom } from \"./room\";\n\ntype LocalPlayer = Player & {\n  /** The local player's network object */\n  // peer?: Peer;\n};\n\nconst [localPlayer, setLocalPlayer] = createStore<LocalPlayer>();\n\nconst { Provider: LocalPlayerProvider, use: useLocalPlayer } =\n  createContextProvider(\n    { localPlayer, setLocalPlayer },\n    {\n      onInit() {\n        createPersistance(\n          [\"playerId\", () => localPlayer.id],\n          [\"nickname\", () => localPlayer.nickname],\n          [\"avatarSeed\", () => localPlayer.avatarSeed]\n        );\n      },\n\n      onMount() {\n        setLocalPlayer({\n          id: localStorage.getItem(\"playerId\") ?? window.crypto.randomUUID(),\n          nickname: localStorage.getItem(\"nickname\") ?? \"\",\n          avatarSeed:\n            localStorage.getItem(\"avatarSeed\") ?? window.crypto.randomUUID(),\n        });\n      },\n\n      onCleanUp() {},\n    }\n  );\n\nfunction joinRoom() {\n  const { room, setRoom } = useRoom();\n  const { createPeer } = usePeerJS();\n  const peer = createPeer(localPlayer.id!);\n  const roomId = room.id!;\n\n  peer\n    .on(\"error\", (error) => {\n      console.warn({ roomId, error });\n      setRoom(\"error\", error);\n      peer.destroy();\n    })\n    .on(\"open\", () => {\n      console.log(\"Connecting to room\", { roomId });\n      const roomConnection = peer.connect(roomId);\n\n      roomConnection\n        .on(\"open\", () => {\n          console.log(\"Connected to room\", { roomId });\n          setRoom(\"connection\", roomConnection);\n          roomConnection.send(\n            new DataEvent(\"PLAYER_INITIAL_INFO\", {\n              nickname: localPlayer.nickname!,\n              avatarSeed: localPlayer.avatarSeed!,\n            })\n          );\n        })\n\n        .on(\"close\", () => {\n          console.log(\"Disconnected from room\", { roomId });\n        })\n\n        .on(\"error\", (error) => {\n          console.warn(\"Local Player Room error\", { roomId, error });\n          setRoom(\"error\", error);\n        })\n\n        .on(\"data\", (data) => {\n          console.log(`Data from room`, { roomId, data });\n          // console.table(data);\n\n          const { type, payload } = data as any;\n\n          if (type === undefined) {\n            const error = new Error(\"Malformed data from room\", {\n              cause: { roomId, data },\n            });\n            console.warn(error);\n            setRoom(\"error\", error);\n            return;\n          }\n\n          DataEventHandlers[type as DataEventType](roomConnection, payload);\n        });\n    });\n}\n","import { useLocalPlayer } from \"../contexts/player.local\";\nimport { JSX, Show, createMemo } from \"solid-js\";\n\nconst { localPlayer, setLocalPlayer } = useLocalPlayer();\n\nexport default function AvatarSelector(\n  props: JSX.ButtonHTMLAttributes<HTMLButtonElement>\n) {\n  const avatarSrc = createMemo(() => {\n    if (!localPlayer?.avatarSeed) return;\n    return `https://api.dicebear.com/7.x/lorelei/svg?seed=${localPlayer.avatarSeed!}`;\n  });\n\n  return (\n    <button\n      {...props}\n      id=\"avatar_selector_button\"\n      class=\"container border-3 border-dashed shadow shadow-small\"\n      style={{\n        \"font-size\": \"x-large\",\n        \"max-width\": \"28ch\",\n        \"aspect-ratio\": 1,\n        height: \"auto\",\n      }}\n      onClick={randomiseAvatar}\n    >\n      <Show when={avatarSrc()}>\n        <img\n          alt=\"avatar\"\n          draggable=\"false\"\n          style={{\n            margin: 0,\n            border: 0,\n          }}\n          src={avatarSrc()}\n        />\n      </Show>\n    </button>\n  );\n}\n\nfunction randomiseAvatar() {\n  setLocalPlayer(\"avatarSeed\", window.crypto.randomUUID());\n}\n","export default (props = {}) => <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\"{...props}><style>@keyframes spinner_xe7Q{'{'}93.75%,to{'{'}r:3px{'}'}46.875%{'{'}r:.2px{'}'}{'}'}.spinner_b2T7{'{'}animation:spinner_xe7Q .8s linear infinite{'}'}</style><circle cx=\"4\" cy=\"12\" r=\"3\" class=\"spinner_b2T7\"/><circle cx=\"12\" cy=\"12\" r=\"3\" class=\"spinner_b2T7\" style=\"animation-delay:-.65s\"/><circle cx=\"20\" cy=\"12\" r=\"3\" class=\"spinner_b2T7\" style=\"animation-delay:-.5s\"/></svg>","import { useRoom } from \"../contexts/room\";\nimport { Accessor, JSX, createMemo } from \"solid-js\";\nimport loadingDotsSVG from \"../icons/loading-dots.svg?component-solid\";\n\nconst { room } = useRoom();\n\ntype EnterRoomButtonProps = JSX.ButtonHTMLAttributes<HTMLButtonElement> & {\n  loading: Accessor<boolean>;\n};\n\nexport default function EnterRoomButton(props: EnterRoomButtonProps) {\n  const { loading = () => true } = props;\n\n  const innerHTML = createMemo(() => (\n    <>\n      {loading() ? loadingDotsSVG : `⚔ ${room?.isHost ? \"Host\" : \"Join\"} Room`}\n    </>\n  ));\n\n  return (\n    <button\n      {...props}\n      id=\"enter_room_button\"\n      class=\"btn-secondary-outline\"\n      style=\"fill:var(--secondary); min-width: 11ch; max-width: fit-content; font-size: xx-large; font-variant: small-caps\"\n    >\n      {props.children ?? innerHTML()}\n    </button>\n  );\n}\n","import { useLocalPlayer } from \"../contexts/player.local\";\nimport { JSX } from \"solid-js\";\n\nexport default function NicknameInput(\n  props: JSX.InputHTMLAttributes<HTMLInputElement>\n) {\n  const { localPlayer, setLocalPlayer } = useLocalPlayer();\n\n  return (\n    <input\n      {...props}\n      id=\"nickname_name_input\"\n      type=\"text\"\n      placeholder=\"nickname goes here ♥\"\n      class=\"container border-3 border-dashed shadow shadow-hover shadow-small\"\n      maxlength=\"24\"\n      style={{\n        \"text-align\": \"center\",\n        \"font-size\": \"x-large\",\n        \"max-width\": \"28ch\",\n      }}\n      value={localPlayer?.nickname}\n      onInput={(event) => setLocalPlayer(\"nickname\", event.target.value)}\n    />\n  );\n}\n","export { createHostRoom, useHostRoom, type HostRoom, type HostedPlayer };\n\nimport { type DataConnection } from \"peerjs\";\nimport { type SetStoreFunction } from \"solid-js/store\";\nimport { DataEventHandlers, type DataEventType } from \"../utils/DataEvents\";\nimport { usePeerJS } from \"./peer\";\nimport { type Player } from \"./player\";\nimport { useRoom, type Room } from \"./room\";\n\ntype HostRoom = Room & {\n  /** The local player is hosting the room */\n  isHost: true;\n  /** The players currently connected to the room */\n  players: HostedPlayer[];\n};\n\ntype HostedPlayer = Player & {\n  /** The connection to remote player */\n  connection?: DataConnection;\n};\n\nconst useHostRoom = () => {\n  const { room: hostRoom, setRoom: setHostRoom } = useRoom() as {\n    room: HostRoom;\n    setRoom: SetStoreFunction<HostRoom>;\n  };\n  return { hostRoom, setHostRoom };\n};\n\nfunction createHostRoom() {\n  console.log(\"Creating Host Room\");\n  const { hostRoom, setHostRoom } = useHostRoom();\n  const { createPeer } = usePeerJS();\n  const peer = createPeer(hostRoom.id!);\n\n  peer\n    .on(\"error\", (error) => {\n      console.warn(\"Host Room Peer error\", { error });\n      peer.destroy();\n    })\n\n    .on(\"open\", (roomId) => {\n      console.log(\"Room opened\", { roomId });\n      setHostRoom(\"id\", roomId);\n    })\n\n    .on(\"connection\", (connection) => {\n      const playerId = connection.peer;\n      console.log(\"Player connecting\", { playerId });\n\n      connection\n        .on(\"open\", () => {\n          console.log(\"Player connected\", { playerId });\n\n          // add player to list\n          const roomPlayer: HostedPlayer = { id: playerId, connection };\n          setHostRoom(\"players\", (players) => [...players, roomPlayer]);\n        })\n\n        .on(\"close\", () => {\n          console.log(\"Player disconnected\", { playerId });\n        })\n\n        .on(\"error\", (error) =>\n          console.warn(\"Player connection error\", { playerId, error })\n        )\n\n        .on(\"data\", (data: any) => {\n          const { type, payload } = data;\n\n          if (type === undefined) {\n            console.warn(\"Malformed data from player\", { playerId, data });\n            return;\n          }\n\n          DataEventHandlers[type as DataEventType](connection, payload);\n        });\n    });\n\n  return { hostRoom, setHostRoom };\n}\n","import { createEffect, createMemo, createSignal, on } from \"solid-js\";\nimport AvatarSelector from \"../components/AvatarSelector\";\nimport EnterRoomButton from \"../components/EnterRoomButton\";\nimport NicknameInput from \"../components/NicknameInput\";\nimport { joinRoom, useLocalPlayer } from \"../contexts/player.local\";\nimport { useRoom } from \"../contexts/room\";\nimport { createHostRoom } from \"../contexts/room.host\";\nimport { useUI } from \"../contexts/ui\";\nimport \"./EntryScene.css\";\n\nexport default function EntryScene() {\n  const { localPlayer } = useLocalPlayer();\n  const { room } = useRoom();\n  const { UI, setUI } = useUI();\n  const [isPendingEntry, setIsPendingEntry] = createSignal(false);\n\n  // when room is connected,\n  // transition to Lobby\n  createMemo(\n    on(\n      () => room.connection,\n      () => setUI(\"scene\", { name: \"Lobby\" }),\n      { defer: true }\n    )\n  );\n\n  // when host room is ready,\n  // join as host player\n  createEffect(\n    on(\n      () => room.id,\n      () => {\n        if (room.isHost) joinRoom();\n      },\n      { defer: true }\n    )\n  );\n\n  // when a room error occurs,\n  // show alert modal\n  createEffect(\n    on(\n      () => room.error!,\n      (error) => {\n        switch (error.type ?? error.name) {\n          case \"peer-unavailable\": {\n            setUI(\"alert\", {\n              show: true,\n              level: \"alert-warning\",\n              innerHTML: \"Could not connect to room 🤔\",\n            });\n            break;\n          }\n          default: {\n            setUI(\"alert\", {\n              show: true,\n              level: \"alert-danger\",\n              innerHTML: error.message,\n            });\n          }\n        }\n      },\n      { defer: true }\n    )\n  );\n\n  // when alert modal closes,\n  // re-enable inputs\n  createEffect(() => {\n    if (!UI.alert.show) setIsPendingEntry(false);\n  });\n\n  function enterRoom() {\n    setIsPendingEntry(true);\n    const { room } = useRoom();\n    if (room.isHost) {\n      createHostRoom(); // local player will autojoin when host room is ready\n    } else {\n      joinRoom();\n    }\n  }\n\n  return (\n    <>\n      <section>\n        <AvatarSelector disabled={isPendingEntry()} />\n        <NicknameInput disabled={isPendingEntry()} />\n      </section>\n      <EnterRoomButton\n        disabled={!localPlayer?.nickname || isPendingEntry()}\n        onclick={enterRoom}\n        loading={isPendingEntry}\n      />\n    </>\n  );\n}\n","export default function GameLayout() {\n  return <>Game Layout</>;\n}\n","export default (props = {}) => <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"1em\" height=\"1em\" fill=\"none\" stroke-width=\"0\" style=\"overflow:visible;color:currentcolor\" viewBox=\"0 -4 24 24\"{...props}><path fill=\"currentColor\" fill-rule=\"evenodd\" d=\"M7 3a4.002 4.002 0 0 1 3.874 3H19v2h-8.126A4.002 4.002 0 0 1 3 7a4 4 0 0 1 4-4m0 6a2 2 0 1 0 0-4 2 2 0 0 0 0 4m10 11a4.002 4.002 0 0 1-3.874-3H5v-2h8.126A4.002 4.002 0 0 1 21 16a4 4 0 0 1-4 4m0-2a2 2 0 1 0 0-4 2 2 0 0 0 0 4\" clip-rule=\"evenodd\"/></svg>","import { Index, onMount } from \"solid-js\";\nimport { useRoom } from \"../contexts/room\";\nimport optionsSVG from \"../icons/options.svg?component-solid\";\nimport \"./LobbyScene.css\";\n\nexport default function LobbyLayout() {\n  const { room } = useRoom();\n  onMount(() => {\n    const params = new URLSearchParams(document.location.search);\n    const params_roomId = params.get(\"room\");\n    if (params_roomId == null) history.pushState({}, \"\", `?room=${room.id!}`);\n  });\n\n  return (\n    <div class=\"row flex-spaces tabs\">\n      <input id=\"tab1\" type=\"radio\" name=\"tabs\" checked />\n      <label for=\"tab1\">{room.players.length} : Lobby</label>\n      <input id=\"tab2\" type=\"radio\" name=\"tabs\" />\n      <label for=\"tab2\" style={{ height: \"5em\" }}>\n        {\n          //@ts-expect-error\n          optionsSVG\n        }{\" \"}\n        Options\n      </label>\n      <div class=\"content\" id=\"content1\">\n        <h4>\n          {`${room.players.length} player${\n            room.players.length == 1 ? \"\" : \"s\"\n          } in lobby`}\n        </h4>\n        <Index each={room.players}>\n          {(player, i) => <li>{player().id}</li>}\n        </Index>\n      </div>\n      <div class=\"content\" id=\"content2\">\n        settings...\n      </div>\n    </div>\n  );\n}\n","export { ColorScheme, ColorSchemeOption, Provider as UIProvider, use as useUI };\n\nimport { JSX, createEffect, on } from \"solid-js\";\nimport { createStore } from \"solid-js/store\";\nimport EntryScene from \"../scenes/EntryScene\";\nimport GameScene from \"../scenes/GameScene\";\nimport LobbyScene from \"../scenes/LobbyScene\";\nimport { createContextProvider } from \"../utils/createContextProvider\";\nimport createPersistance from \"../utils/createPersistance\";\n\nconst colorSchemes_matchMedia = [\"light\", \"dark\"] as const;\nconst colorSchemes = colorSchemes_matchMedia;\ntype ColorScheme = (typeof colorSchemes)[number];\nconst colorSchemeOptions = [\"system\", ...colorSchemes] as const;\ntype ColorSchemeOption = (typeof colorSchemeOptions)[number];\n\nconst scenes = {\n  Entry: EntryScene,\n  Lobby: LobbyScene,\n  Game: GameScene,\n};\n\ntype UIState = {\n  colorScheme: {\n    isDark: boolean;\n    setting: ColorSchemeOption;\n    toggleSetting: () => void;\n  };\n  scene: {\n    name: keyof typeof scenes;\n    component: (typeof scenes)[keyof typeof scenes];\n  };\n  alert: {\n    show: boolean;\n    level:\n      | \"alert-primary\"\n      | \"alert-secondary\"\n      | \"alert-success\"\n      | \"alert-warning\"\n      | \"alert-danger\";\n    innerHTML?: JSX.Element;\n    dialogRef?: HTMLDialogElement;\n  };\n};\n\nconst [UI, setUI] = createStore<UIState>({\n  colorScheme: {\n    isDark: false,\n    setting: \"system\",\n    toggleSetting: toggleColorSchemeSetting,\n  },\n  scene: { name: \"Entry\", component: EntryScene },\n  alert: {\n    show: false,\n    level: \"alert-warning\",\n    innerHTML: \"Hello, world!\",\n  },\n});\n\nconst { Provider, use } = createContextProvider(\n  { UI, setUI },\n  {\n    onInit() {\n      createPersistance([\"colorSchemeSetting\", () => UI.colorScheme.setting]);\n\n      // apply dark mode class on the html element\n      createEffect(\n        on(\n          () => UI.colorScheme.isDark,\n          () => {\n            UI.colorScheme.isDark\n              ? document.documentElement.classList.add(\"dark\")\n              : document.documentElement.classList.remove(\"dark\");\n          },\n          { defer: false }\n        )\n      );\n\n      // set isDark based on setting\n      createEffect(() => {\n        setUI(\n          \"colorScheme\",\n          \"isDark\",\n          UI.colorScheme.setting !== \"system\"\n            ? UI.colorScheme.setting === \"dark\"\n            : isSystemDark() ?? UI.colorScheme.isDark\n        );\n      });\n\n      // when scene name changes\n      // update component to match\n      createEffect(\n        on(\n          () => UI.scene.name,\n          () => setUI(\"scene\", { component: scenes[UI.scene.name] }),\n          { defer: true }\n        )\n      );\n    },\n\n    onMount() {\n      const colorSchemeSetting =\n        (localStorage.getItem(\"colorSchemeSetting\") as ColorSchemeOption) ??\n        UI.colorScheme.setting;\n\n      setUI(\"colorScheme\", \"setting\", colorSchemeSetting);\n\n      window\n        .matchMedia(\"(prefers-color-scheme: dark)\")\n        .addEventListener(\"change\", ({ matches: isDark }) => {\n          if (UI.colorScheme.setting !== \"system\") return;\n          setUI(\"colorScheme\", { isDark });\n        });\n    },\n\n    onCleanUp() {},\n  }\n);\n\nfunction isSystemDark(): boolean | undefined {\n  if (window.matchMedia === undefined) return;\n  return window.matchMedia(`(prefers-color-scheme: dark)`).matches;\n}\n\nfunction toggleColorSchemeSetting() {\n  const current_idx = colorSchemeOptions.indexOf(UI.colorScheme.setting);\n  const new_idx = (current_idx + 1) % colorSchemeOptions.length;\n  setUI(\"colorScheme\", \"setting\", colorSchemeOptions[new_idx]);\n}\n","import { createEffect, on } from \"solid-js\";\nimport { useUI } from \"../contexts/ui\";\nimport \"./AlertModal.css\";\n\nexport default () => {\n  const { UI, setUI } = useUI();\n\n  createEffect(\n    on(\n      () => UI.alert.show,\n      () => {\n        if (UI.alert.show) {\n          UI.alert.dialogRef?.showModal();\n        } else {\n          UI.alert.dialogRef?.close();\n        }\n      },\n      { defer: true }\n    )\n  );\n\n  createEffect(() =>\n    UI.alert.dialogRef!.addEventListener(\"close\", () =>\n      setUI(\"alert\", { show: false })\n    )\n  );\n\n  return (\n    <dialog ref={(dialogRef) => setUI(\"alert\", { dialogRef })}>\n      <input id=\"alertModal\" class=\"alert-state\" type=\"checkbox\" />\n      <div class={\"alert  \" + UI.alert.level}>\n        {UI.alert.innerHTML}\n        <label\n          class=\"btn-close\"\n          for=\"alertModal\"\n          onclick={() => UI.alert.dialogRef?.close()}\n          innerText=\"X\"\n        />\n      </div>\n    </dialog>\n  );\n};\n","import { Component, ParentProps } from \"solid-js\";\nimport { JSX } from \"solid-js/jsx-runtime\";\n\ntype ComposeProps = ParentProps & { components: Component<any>[] };\n\nexport default function Compose(props: ComposeProps): JSX.Element {\n  const { components = [], children } = props;\n\n  return (\n    <>\n      {components.reduceRight(\n        (ComponentStack, Component) => (\n          <Component>{ComponentStack}</Component>\n        ),\n        children\n      )}\n    </>\n  );\n}\n","export { Game, GameProvider, useGame };\nimport { createStore } from \"solid-js/store\";\nimport { createContextProvider } from \"../utils/createContextProvider\";\n\ntype Player = {};\ntype Pile = {\n  cards: Card[];\n  draw?: (amount: number) => Card[];\n  add?: (...cards: Card[]) => void;\n  shuffle?: () => {};\n};\n\ntype Suit = \"♠\" | \"♥\" | \"♦\" | \"♣\";\ntype Rank =\n  | \"2\"\n  | \"3\"\n  | \"4\"\n  | \"5\"\n  | \"6\"\n  | \"7\"\n  | \"8\"\n  | \"9\"\n  | \"10\"\n  | \"J\"\n  | \"Q\"\n  | \"K\"\n  | \"A\";\n\ntype Card = { suit: Suit; rank: Rank };\n\ntype Game = {\n  players?: Player[];\n  currentPlayerIndex?: number;\n  piles?: {\n    deck: Pile;\n    [pile: string]: Pile;\n  };\n};\n\nconst [game, setGame] = createStore<Game>({});\n\nconst { Provider: GameProvider, use: useGame } = createContextProvider(\n  { game, setGame },\n  {\n    onInit() {\n      // console.log(\"[Game Context] Initialising\");\n    },\n\n    onMount() {\n      // console.log(\"[Game Context] Mounted\");\n    },\n\n    onCleanUp() {\n      // console.log(\"[Game Context] Cleaning\");\n    },\n  }\n);\n","import { GameProvider } from \"../contexts/game\";\nimport { LocalPlayerProvider } from \"../contexts/player.local\";\nimport { PeerJSProvider } from \"../contexts/peer\";\nimport { RoomProvider } from \"../contexts/room\";\nimport { UIProvider } from \"../contexts/ui\";\n\nexport default [\n  GameProvider,\n  LocalPlayerProvider,\n  PeerJSProvider,\n  RoomProvider,\n  UIProvider,\n];\n","import \"./Footer.module.css\";\n\nexport default () => (\n  <footer>\n    <p\n      // @ts-expect-error\n      xmlns:cc=\"http://creativecommons.org/ns#\"\n      xmlns:dct=\"http://purl.org/dc/terms/\"\n    >\n      <a\n        rel=\"cc:attributionURL\"\n        property=\"dct:title\"\n        href=\"https://github.com/jgrunik/upgrade\"\n      >\n        Upgrade\n      </a>\n      &nbsp;by&nbsp;\n      <a\n        style=\"margin-right:0.5ch;\"\n        rel=\"cc:attributionURL dct:creator\"\n        property=\"cc:attributionName\"\n        href=\"https://github.com/jgrunik\"\n      >\n        Joshua Grunik\n      </a>\n      is licenced under\n      <a\n        style=\"display: inline-flex; margin-left: 0.5ch;\"\n        rel=\"license noopener noreferrer\"\n        href=\"http://creativecommons.org/licenses/by-nc-sa/4.0/\"\n        target=\"_blank\"\n        innerText=\"CC BY-NC-SA 4.0\"\n      />\n      <span style=\"display: inline-flex; height: 1.75ch; margin-left: 0.5ch;\">\n        <img src=\"https://mirrors.creativecommons.org/presskit/icons/cc.svg\" />\n        <img src=\"https://mirrors.creativecommons.org/presskit/icons/by.svg\" />\n        <img src=\"https://mirrors.creativecommons.org/presskit/icons/nc.svg\" />\n        <img src=\"https://mirrors.creativecommons.org/presskit/icons/sa.svg\" />\n      </span>\n    </p>\n  </footer>\n);\n","export default (props = {}) => <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"1em\" height=\"1em\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"0\" style=\"overflow:visible;color:currentcolor\" viewBox=\"0 0 24 24\"{...props}><path fill=\"currentColor\" fill-rule=\"evenodd\" stroke=\"none\" d=\"M2.25 5.25a3 3 0 0 1 3-3h13.5a3 3 0 0 1 3 3V15a3 3 0 0 1-3 3h-3v.257c0 .597.237 1.17.659 1.591l.621.622a.75.75 0 0 1-.53 1.28h-9a.75.75 0 0 1-.53-1.28l.621-.622a2.25 2.25 0 0 0 .659-1.59V18h-3a3 3 0 0 1-3-3zm1.5 0v7.5a1.5 1.5 0 0 0 1.5 1.5h13.5a1.5 1.5 0 0 0 1.5-1.5v-7.5a1.5 1.5 0 0 0-1.5-1.5H5.25a1.5 1.5 0 0 0-1.5 1.5\" clip-rule=\"evenodd\"/></svg>","export default (props = {}) => <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"1em\" height=\"1em\" fill=\"currentColor\" stroke-width=\"0\" style=\"overflow:visible;color:currentcolor\" viewBox=\"0 0 16 16\"{...props}><path d=\"M6 .278a.768.768 0 0 1 .08.858 7.208 7.208 0 0 0-.878 3.46c0 4.021 3.278 7.277 7.318 7.277.527 0 1.04-.055 1.533-.16a.787.787 0 0 1 .81.316.733.733 0 0 1-.031.893A8.349 8.349 0 0 1 8.344 16C3.734 16 0 12.286 0 7.71 0 4.266 2.114 1.312 5.124.06A.752.752 0 0 1 6 .278\"/><path d=\"M10.794 3.148a.217.217 0 0 1 .412 0l.387 1.162c.173.518.579.924 1.097 1.097l1.162.387a.217.217 0 0 1 0 .412l-1.162.387a1.734 1.734 0 0 0-1.097 1.097l-.387 1.162a.217.217 0 0 1-.412 0l-.387-1.162A1.734 1.734 0 0 0 9.31 6.593l-1.162-.387a.217.217 0 0 1 0-.412l1.162-.387a1.734 1.734 0 0 0 1.097-1.097zM13.863.099a.145.145 0 0 1 .274 0l.258.774c.115.346.386.617.732.732l.774.258a.145.145 0 0 1 0 .274l-.774.258a1.156 1.156 0 0 0-.732.732l-.258.774a.145.145 0 0 1-.274 0l-.258-.774a1.156 1.156 0 0 0-.732-.732l-.774-.258a.145.145 0 0 1 0-.274l.774-.258c.346-.115.617-.386.732-.732z\"/></svg>","export default (props = {}) => <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"1em\" height=\"1em\" fill=\"currentColor\" stroke-width=\"0\" style=\"overflow:visible;color:currentcolor\" viewBox=\"0 0 16 16\"{...props}><path d=\"M8 12a4 4 0 1 0 0-8 4 4 0 0 0 0 8M8 0a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-1 0v-2A.5.5 0 0 1 8 0m0 13a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-1 0v-2A.5.5 0 0 1 8 13m8-5a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1 0-1h2a.5.5 0 0 1 .5.5M3 8a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1 0-1h2A.5.5 0 0 1 3 8m10.657-5.657a.5.5 0 0 1 0 .707l-1.414 1.415a.5.5 0 1 1-.707-.708l1.414-1.414a.5.5 0 0 1 .707 0m-9.193 9.193a.5.5 0 0 1 0 .707L3.05 13.657a.5.5 0 0 1-.707-.707l1.414-1.414a.5.5 0 0 1 .707 0m9.193 2.121a.5.5 0 0 1-.707 0l-1.414-1.414a.5.5 0 0 1 .707-.707l1.414 1.414a.5.5 0 0 1 0 .707M4.464 4.465a.5.5 0 0 1-.707 0L2.343 3.05a.5.5 0 1 1 .707-.707l1.414 1.414a.5.5 0 0 1 0 .708\"/></svg>","import { createMemo } from \"solid-js\";\nimport { useUI } from \"../contexts/ui\";\nimport systemIcon from \"../icons/computer-desktop.svg?component-solid\";\nimport darkIcon from \"../icons/moon.svg?component-solid\";\nimport lightIcon from \"../icons/sun.svg?component-solid\";\n\nconst IconList = {\n  system: systemIcon,\n  dark: darkIcon,\n  light: lightIcon,\n} as const;\n\nexport default function ColorSchemeButton() {\n  const { UI } = useUI();\n\n  const icon = createMemo(() => IconList[UI.colorScheme.setting]);\n\n  return (\n    <button\n      class=\"card border\"\n      style=\"margin-right: 0; margin: 0; padding: 0.5rem\"\n      popover-left={`color scheme '${UI.colorScheme.setting}'`}\n      onClick={UI.colorScheme.toggleSetting}\n    >\n      {\n        // @ts-expect-error\n        icon()\n      }\n    </button>\n  );\n}\n","export default (props = {}) => <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"1em\" height=\"1em\" fill=\"currentColor\" stroke-width=\"0\" style=\"overflow:visible;color:currentcolor\" viewBox=\"0 0 16 16\"{...props}><path d=\"M12.775 5.44C9.751 3.192 8.708 1.393 8.001 0c-.708 1.393-1.75 3.192-4.774 5.44-5.157 3.833-.303 9.182 3.965 6.238-.278 1.827-1.227 3.159-2.191 3.733v.59h6v-.59c-.964-.574-1.913-1.906-2.191-3.733 4.268 2.944 9.122-2.405 3.965-6.238\"/></svg>","import ColorSchemeButton from \"../../components/ColorSchemeButton\";\nimport spadeSVG from \"../../icons/spade.svg?component-solid\";\nimport \"./Header.module.css\";\n\nexport default () => (\n  <header class=\"not-selectable\">\n    <h1>\n      {\n        //@ts-expect-error\n        spadeSVG\n      }{\" \"}\n      Upgrade\n    </h1>\n    <ColorSchemeButton />\n  </header>\n);\n","import AlertModal from \"../../components/AlertModal\";\nimport { useUI } from \"../../contexts/ui\";\nimport Compose from \"../../utils/Compose\";\nimport contexts from \"../../utils/contexts\";\nimport Footer from \"./Footer\";\nimport Header from \"./Header\";\nimport \"./Page.css\";\n\nconst { UI } = useUI();\n\nexport default function LandingPage() {\n  return (\n    <Compose components={contexts}>\n      <Header />\n      <main>{UI.scene.component()}</main>\n      <Footer />\n      <AlertModal />\n    </Compose>\n  );\n}\n"],"file":"assets/entries/pages_index.BnASkYJf.js"}